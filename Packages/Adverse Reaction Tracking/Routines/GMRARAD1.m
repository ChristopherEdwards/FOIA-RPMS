GMRARAD1 ;HIRMFO/WAA-RADIOLOGY ALLERGY INTERFACE ; 10/1/92
 ;;4.0;Adverse Reaction Tracking;**13,27**;Mar 29, 1996
PSCHK(GMRAVAR) ; This function will return a 1 (true) if the variable ptr
 ; passed in (GMRAVAR) has a RADIOLOGICAL CONTRAST/MEDIA VA Drug
 ; Class associated with it.
 N CHK,GMRAX,GMRAY
 S CHK=0,GMRAX=$P(GMRAVAR,";")
 I $P(GMRAVAR,";",2)="PSDRUG(" S:"^DX100^DX101^DX102^DX103^DX104^DX105^DX106^DX107^DX108^DX109^"[("^"_$P($G(^PSDRUG(GMRAX,0)),U,2)_"^") CHK=1
 I $P(GMRAVAR,";",2)=$P($$NDFREF^GMRAOR,U,2) D:$D(@($$NDFREF^GMRAOR_GMRAX_",0)"))
 .N CLASS,GMRACL
 .S CLASS=$$CLIST^PSNAPIS(GMRAX,.GMRACL) I $O(GMRACL(0)) D  Q:CHK
 ..S CLASS=0 F  S CLASS=$O(GMRACL(CLASS)) Q:'CLASS  D
 ...I "^DX100^DX101^DX102^DX103^DX104^DX105^DX106^DX107^DX108^DX109^"[("^"_$P(GMRACL(CLASS),U,2)_"^") S CHK=1
 ..Q
 .Q
 Q CHK
