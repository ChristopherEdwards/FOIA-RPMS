ACDWCD60 ; IHS/ADC/EDE/KML - CLIENT DET OUTP FOR CRISIS BRIEF 10:11 NOV 17,1993 ; 
 ;;4.1;CHEMICAL DEPENDENCY MIS;;MAY 11, 1998
 ;*********************************************************************
 ;//^ACDWDRV3, ^ACDWIIF
 ;*********************************************************************
 ;S ACDP1="" F  S ACDP1=$O(^TMP("ACD",ACDJOB,ACDBT,ACDTGSUB,"VAL",ACDP1)) Q:ACDP1=""  F ACDP2=0:0 S ACDP2=$O(^TMP("ACD",ACDJOB,ACDBT,ACDTGSUB,"VAL",ACDP1,ACDP2)) Q:'ACDP2  S ACDDA=ACDP2 D ^ACDWIIF S ACDDA=^ACDIIF(ACDP2,"BWP") D ^ACDWVIS D P1
 S ACDP1=""
 F  S ACDP1=$O(^TMP("ACD",ACDJOB,ACDBT,ACDTGSUB,"VAL",ACDP1)) Q:ACDP1=""  D  Q:$D(DIRUT)
 . F ACDP2=0:0 S ACDP2=$O(^TMP("ACD",ACDJOB,ACDBT,ACDTGSUB,"VAL",ACDP1,ACDP2)) Q:'ACDP2  D  Q:$D(DIRUT)
 .. S ACDDA=ACDP2 D ^ACDWIIF S ACDDA=^ACDIIF(ACDP2,"BWP") D ^ACDWVIS D P1
 .. Q
 . Q
 D ^ACDWK Q
P1 ;Output
 D F W !!,"VISIT DATE:",?40,ACDCLIV
 D F W !,"COMPONENT:",?40,ACDCOMCL," / ",ACDCOMTL
 D F W !!,"PROVIDER:",?40,ACDPROV
 D F W !,"PRIMARY PROBLEM:",?40,ACDPROBP
 D F W !,"OTHER PROBLEMS:" S ACDLP="" F  D F S ACDLP=$O(ACDPTA(ACDLP)) Q:ACDLP=""  W ?40,ACDLP,!
 D F W !,"HOURS FOR 'OT' : ",?40,ACDOTHRS
 D F W !,"DISPOSITION FOR 'OT': ",?40,ACDOTDIS
 W !!,"..........................................",!
 ;
 Q
F ;Form feed
 Q:$D(DIRUT)
 I $Y+4>IOSL D F^ACDWUTL
