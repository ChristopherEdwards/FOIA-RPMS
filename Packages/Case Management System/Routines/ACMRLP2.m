ACMRLP2 ; IHS/TUCSON/TMJ - PRINT LISTER REPORT ; [ 06/01/1999  1:42 PM ]
 ;;2.0;ACM CASE MANAGEMENT SYSTEM;**1**;JAN 10, 1996
 ;
 ;IHS/CMI/LAB - tmp to xtmp
DONE ;EP
 I ACMCTYP'="F" D DONE^ACMRL ;IHS/CMI/LAB
 K ^XTMP("ACMRL",ACMJOB,ACMBT)
 D DEL^ACMRL
 K ACMBD,ACMSD,ACMED,ACMEDD,ACMBDD,ACMRPT,ACMHEAD,ACMLINE,ACML,ACMRCNT,ACMI,ACMCRIT,ACMVIEN,ACMVREC,ACMJOB,ACMBT,ACMBTH,ACMQUIT,ACMHDR,ACMDASH,ACMLENG,ACMPCNT,ACMTCW,ACMODAT,ACMPG,AUPNDAYS,AUPNPAT,AUPNDOD,AUPNDOB,AUPNSEX
 K ACMSORT,ACMSRT,ACMSORX,ACMFILE,ACMFIEL,ACMPRNT,ACMX,ACMFOUN,D0,J,K,L,ACMPRNM,ACMTEST,ACMSEAT,ACMLHDR,ACMFRST,ACMFFN
 Q
HEAD ;ENTRY POINT
 I 'ACMPG G HEAD1
 I $E(IOST)="C",IO=IO(0) W ! S DIR(0)="EO" D ^DIR K DIR I Y=0!(Y="^")!($D(DTOUT)) S ACMQUIT="" Q
HEAD1 ;EP
 W:$D(IOF) @IOF S ACMPG=ACMPG+1
 I $G(ACMTITL)="" S ACMTEXT="CASE MANAGEMENT PATIENT LISTING",ACMLENG=$L(ACMTEXT) W !?((ACMTCW-ACMLENG)/2),ACMTEXT,?(ACMTCW-8),"Page ",ACMPG
 S ACMTEXT=$P(^ACM(41.1,ACMRG,0),U)_" REGISTER",ACMLENG=$L(ACMTEXT) W !?(($S(ACMTCW>80:80,1:ACMTCW)-ACMLENG)/2),ACMTEXT
 I $G(ACMTITL)]"" S ACMLENG=$L(ACMTITL) W !?((ACMTCW-ACMLENG)/2),ACMTITL,?(ACMTCW-8),"Page ",ACMPG
 I ACMCTYP="S" S ACMLENG=$L(ACMSORV)+23 W !?((ACMTCW-ACMLENG)/2)," PATIENT SUB-TOTALS BY:  ",ACMSORV,!
 I $G(ACMSPAG) S ACMLENG=$L(ACMSORV)+$L(ACMSRTR)+2 S:ACMTCW<ACMLENG ACMLENG=ACMTCW W !?((ACMTCW-ACMLENG)/2),ACMSORV,":  ",ACMSRTR,!
 I ACMHEAD]"" W !,ACMHEAD,!
 W ACMDASH,!
 I ACMCTYP="S" W !,ACMSORV,":"
 Q
