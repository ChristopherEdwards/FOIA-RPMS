FHORD ; HISC/REL/NCA - Diet Order Entry ;8/9/96  12:29 ;
 ;;5.0;Dietetics;**12**;Oct 11, 1995
EN1 ; Edit Diets
 S CHK=0,TYP="D",EVENT="UPD",REC=1,(NOD1,NOD2)="" K ^TMP($J,"FHNOD3")
 S (DIC,DIE)="^FH(111,",DIC(0)="AEQLM",DIC("DR")=".01",DLAYGO=111 W ! D ^DIC K DIC,DLAYGO G KIL:U[X!$D(DTOUT),EN1:Y<1
 S IEN=Y,NOD1=$P($G(^FH(111,+IEN,0)),"^",1,4),NOD2=$G(^FH(111,+IEN,"I"))
 F IEN1=0:0 S IEN1=$O(^FH(111,+IEN,"AN",IEN1)) Q:IEN1<1  S:'$D(^TMP($J,"FHNOD3",IEN1)) ^TMP($J,"FHNOD3",IEN1)=$G(^FH(111,+IEN,"AN",IEN1,0))
 S DA=+Y,DR=$S(DA'=1:".01:99",1:"1;2;5;6;10"),DIE("NO^")="" S:$D(^XUSEC("FHMGR",DUZ)) DIDEL=111 D ^DIE K DIC,DIE,DIDEL I $D(^ORD(101.43)) D UPDATE^FHWOR6
 G EN1
EN2 ; List Diets
 W !!,"The list requires a 132 column printer.",!
 W ! S L=0,DIC="^FH(111,",FLDS="[FHDIETL]",BY="NAME"
 S FR="",TO="",DHD="DIETS LIST" D EN1^DIP,RSET Q
KIL K ^TMP($J),%,ADM,ALL,C,CHK,D,DA,DIC,DIE,DR,DFN,EVENT,FHDR,FHK,I,IEN,IEN1,FHX1,FHX2,FHWF,FHPV,COM,NOD1,NOD2,NOD3,NOW,POP,REC,STR,STR1,TYP,WARD,X Q
RSET K %ZIS S IOP="" D ^%ZIS K %ZIS,IOP,BY,DA,DFN,DHD,DIC,DIE,DR,FLDS,FR,L,TO,X,Y Q
