BGUTRLU ; IHS/OIT/MJL - DEBUGGING TRACE FACILITY ;
 ;;1.5;BGU;;MAY 26, 2005
 S U="^" D GFL,LISTSEQ:BGULSQA
 K BGULSQA
 Q
 ;
GFL ;
 S BGULSQA=$P($G(^BGUTRACE(0)),"^",3) I 'BGULSQA W !,"No sequences recorded" Q
 W "LAST SEQUENCE ASSIGNED: ",BGULSQA
 F  D  Q:$D(DIRUT)
 .S DIR(0)="NO",DIR("A")="START FROM" D ^DIR Q:$D(DIRUT)  S BGUS=$S(X=" ":$S($G(BGUS)'="":BGUS,1:0),1:X) W:X=" " *8,BGUS
 .S DIR(0)="FO",DIR("A")="END AT" D ^DIR Q:$D(DIROUT)  S BGUE=$S($D(DIRUT):$O(^BGUTRACE("A"),-1),1:X) I X="" K DIRUT W BGUE
 .S BGUN=BGUS-1,DIR(0)="FOA",DIR("A")="<>"
 .F BGUQ=1:1 S BGUN=$O(^BGUTRACE(BGUN)) Q:'BGUN!(BGUN>BGUE)!$D(DUOUT)  W !,BGUN," ",$G(^BGUTRACE(BGUN,1,1,0),"Incomplete file entry") I BGUQ#20=0 D ^DIR Q:$D(DIROUT)  K DIRUT
 K BGUE,BGUS,BGUN,BGUQ,DIR,DIRUT,DIROUT,X
 Q
 ;
LISTSEQ ;
 ;S DI="^BGUTRACE(",DK=90061
 ;D B^DII
 S DIC="^BGUTRACE(",DIC(0)="AQEM" D ^DIC S DA=+Y
 I +Y>0 S DIC="^BGUTRACE(" D EN^DIQ G LISTSEQ
 K %ZISOS,D1,DIK,DISYS,DIW,DIWL,DIWR,DIWT,DN,DX,IOBS,IOF,ION,IOSL,IOT,IOXY,POP
 Q
