BHSPLAN ;IHS/MSC/MGH  - Health Summary for Items associated with Problem list ;31-Dec-2015 17:09;DU
 ;;1.0;HEALTH SUMMARY COMPONENTS;**8,13**;Mar 17,2006;Build 6
 ;===================================================================
GOALDT ;Active Goals by Date
 N TARGET,X,LINE
 S TARGET=$$TMPGBL
 K @TARGET
 D CKP^GMTSUP Q:$D(GMTSQIT)
 S X=$$CPDT^BTIUPLAN(DFN,TARGET,"G")
 S LINE=0
 F  S LINE=$O(@TARGET@(LINE)) Q:LINE=""  D
 .D CKP^GMTSUP Q:$D(GMTSQIT)  I GMTSNPG W !,"",!
 .W @TARGET@(LINE,0),!
 K TARGET
 Q
GOALPR ;Active Goals by Problem
 N TARGET,X,LINE
 S TARGET=$$TMPGBL
 K @TARGET
 D CKP^GMTSUP Q:$D(GMTSQIT)
 S X=$$CPPR^BTIUPLAN(DFN,TARGET,"G")
 S LINE=0
 F  S LINE=$O(@TARGET@(LINE)) Q:LINE=""  D
 .D CKP^GMTSUP Q:$D(GMTSQIT)  I GMTSNPG W !,"",!
 .W @TARGET@(LINE,0),!
 K TARGET
 Q
CPDT ;Active Care Plans by Date
 N TARGET,X,LINE
 S TARGET=$$TMPGBL
 K @TARGET
 D CKP^GMTSUP Q:$D(GMTSQIT)
 S X=$$CPDT^BTIUPLAN(DFN,TARGET,"P")
 S LINE=0
 F  S LINE=$O(@TARGET@(LINE)) Q:LINE=""  D
 .D CKP^GMTSUP Q:$D(GMTSQIT)  I GMTSNPG W !,"",!
 .W @TARGET@(LINE,0),!
 K TARGET
 Q
CPPR ;Active Care Plans by Problem
 N TARGET,X,LINE
 S TARGET=$$TMPGBL
 K @TARGET
 D CKP^GMTSUP Q:$D(GMTSQIT)
 S X=$$CPPR^BTIUPLAN(DFN,TARGET,"P")
 S LINE=0
 F  S LINE=$O(@TARGET@(LINE)) Q:LINE=""  D
 .D CKP^GMTSUP Q:$D(GMTSQIT)  I GMTSNPG W !,"",!
 .W @TARGET@(LINE,0),!
 K TARGET
 Q
ICPR ;Inactive Care Plans by Problem
 N TARGET,X,LINE
 S TARGET=$$TMPGBL
 K @TARGET
 D CKP^GMTSUP Q:$D(GMTSQIT)
 S X=$$ICPR^BHSPLST2(DFN,TARGET,"P","I")
 S LINE=0
 F  S LINE=$O(@TARGET@(LINE)) Q:LINE=""  D
 .D CKP^GMTSUP Q:$D(GMTSQIT)  I GMTSNPG W !,"",!
 .W @TARGET@(LINE,0),!
 K TARGET
 Q
IGPR ;Inactive Goals by Problem
 N TARGET,X,LINE
 S TARGET=$$TMPGBL
 K @TARGET
 D CKP^GMTSUP Q:$D(GMTSQIT)
 S X=$$ICPR^BHSPLST2(DFN,TARGET,"G","I")
 S LINE=0
 F  S LINE=$O(@TARGET@(LINE)) Q:LINE=""  D
 .D CKP^GMTSUP Q:$D(GMTSQIT)  I GMTSNPG W !,"",!
 .W @TARGET@(LINE,0),!
 K TARGET
 Q
BCPR ;Inactive and active care plans by problem
 N TARGET,X,LINE
 S TARGET=$$TMPGBL
 K @TARGET
 D CKP^GMTSUP Q:$D(GMTSQIT)
 S X=$$ICPR^BHSPLST2(DFN,TARGET,"P","B")
 S LINE=0
 F  S LINE=$O(@TARGET@(LINE)) Q:LINE=""  D
 .D CKP^GMTSUP Q:$D(GMTSQIT)  I GMTSNPG W !,"",!
 .W @TARGET@(LINE,0),!
 K TARGET
 Q
BGPR ; Inactive and active goals by problem
 N TARGET,X,LINE
 S TARGET=$$TMPGBL
 K @TARGET
 D CKP^GMTSUP Q:$D(GMTSQIT)
 S X=$$ICPR^BHSPLST2(DFN,TARGET,"G","B")
 S LINE=0
 F  S LINE=$O(@TARGET@(LINE)) Q:LINE=""  D
 .D CKP^GMTSUP Q:$D(GMTSQIT)  I GMTSNPG W !,"",!
 .W @TARGET@(LINE,0),!
 K TARGET
 Q
TMPGBL() ;EP
 K ^TMP("BHSPL",$J) Q $NA(^($J))
