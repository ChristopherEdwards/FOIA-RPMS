APSS COMMAND
ZWR
^APSSCOMD(0)="APSS COMMAND^9009033.3^1^1"
^APSSCOMD(1,0)="FILL"
^APSSCOMD(1,1,0)="^9009033.31I^30^30"
^APSSCOMD(1,1,1,0)="Dispensed Drug NDC^12^^Z"
^APSSCOMD(1,1,1,1)="S VAL=$$NDCVAL^APSPFUNC(RXIEN,REFIEN)"
^APSSCOMD(1,1,1,2,0)="^9009033.312^1^1^3051005^^^^"
^APSSCOMD(1,1,1,2,1,0)="Returns the NDC for the prescription or refill."
^APSSCOMD(1,1,2,0)="Instructions/SIG^8^^Z"
^APSSCOMD(1,1,2,1)="S VAL=$$SIG^APSSSPRO()"
^APSSCOMD(1,1,2,2,0)="^9009033.312^1^1^3051005^^^^"
^APSSCOMD(1,1,2,2,1,0)="Returns SIG from the environment."
^APSSCOMD(1,1,3,0)="Dispensed Qty^10^^ZR"
^APSSCOMD(1,1,3,1)="S VAL=QTY"
^APSSCOMD(1,1,3,2,0)="^9009033.312^1^1^3051005^^^^"
^APSSCOMD(1,1,3,2,1,0)="Returns the quantity to dispense for prescription or refill."
^APSSCOMD(1,1,4,0)="Patient ID^2^^Z"
^APSSCOMD(1,1,4,1)="S VAL=$$HRN^AUPNPAT3($$GETP(RX0,2),$$GETP($G(^PS(59,$$GETP(RX2,9),0)),6))"
^APSSCOMD(1,1,5,0)="Patient Name^3^52,2"
^APSSCOMD(1,1,6,0)="Script Number^4^52,.01"
^APSSCOMD(1,1,7,0)="Dispensed Drug Name^12.1^52,6"
^APSSCOMD(1,1,8,0)="Fill Priority Indicator^30^^Z"
^APSSCOMD(1,1,8,1)="S VAL=$$GETPRI^APSSSPRO($P(RX0,U,5))"
^APSSCOMD(1,1,9,0)="Refills Remaining^25^^Z"
^APSSCOMD(1,1,9,1)="N I S VAL=$P(RX0,U,9),I=0 F  S I=$O(^PSRX(RXIEN,1,I)) Q:'I  S VAL=VAL-1"
^APSSCOMD(1,1,10,0)="Technician Name^14^^ZR"
^APSSCOMD(1,1,10,1)="S VAL=$$GET1^DIQ($S(PARIEN:52.2,REFIEN:52.1,1:52),$S(PARIEN!REFIEN:RXIENS,1:$P(RXIENS,"","",$L(RXIENS,"","")-1)),$S(PARIEN:.07,REFIEN:6,1:38))"
^APSSCOMD(1,1,10,2,0)="^9009033.312^2^2^3051006^^^"
^APSSCOMD(1,1,10,2,1,0)="This fields returns the clerk for partial and refills and the"
^APSSCOMD(1,1,10,2,2,0)="finishing person for the original prescription."
^APSSCOMD(1,1,11,0)="Physician Name^13^^ZR"
^APSSCOMD(1,1,11,1)="S VAL=$$GET1^DIQ($S(PARIEN:52.2,REFIEN:52.1,1:52),$S(PARIEN!REFIEN:RXIENS,1:$P(RXIENS,"","",$L(RXIENS,"","")-1)),$S(PARIEN:6,REFIEN:15,1:4)) S:VAL="""" VAL=""UNKNOWN"""
^APSSCOMD(1,1,12,0)="Dispense Units^12.2^^Z"
^APSSCOMD(1,1,12,1)="S VAL=$$GET1^DIQ(50,$$GETP(RX0,6),14.5)"
^APSSCOMD(1,1,13,0)="Fill Date^7^^Z"
^APSSCOMD(1,1,13,1)="S VAL=$$FMTE^XLFDT($S(PARIEN:$P(^PSRX(RXIEN,""P"",PARIEN,0),U),REFIEN:$P(^PSRX(RXIEN,1,REFIEN,0),U),1:$$GETP(RX2,2)),""2Z"")"
^APSSCOMD(1,1,14,0)="Message Date / Time Stamp^90^^Z"
^APSSCOMD(1,1,14,1)="S VAL=$TR($$FMTE^XLFDT($$NOW^XLFDT(),""2Z""),""@"","" "")"
^APSSCOMD(1,1,15,0)="COM_ID^1^^Z"
^APSSCOMD(1,1,15,1)="S VAL=ZTSK"
^APSSCOMD(1,1,16,0)="CHK_ID^999^^Z"
^APSSCOMD(1,1,16,1)="S VAL=ZTSK"
^APSSCOMD(1,1,17,0)="Retail Price^91^^ZR"
^APSSCOMD(1,1,17,1)="S VAL=$$GET1^DIQ($S(PARIEN:52.2,REFIEN:52.1,1:52),$S(PARIEN!REFIEN:RXIENS,1:$P(RXIENS,"","",$L(RXIENS,"","")-1)),$S(PARIEN:.042,REFIEN:1.2,1:17))"
^APSSCOMD(1,1,18,0)="Pharmacist Initials^30.6^^ZR"
^APSSCOMD(1,1,18,1)="S VAL=$$GET1^DIQ($S(PARIEN:52.2,REFIEN:52.1,1:52),$S(PARIEN!REFIEN:RXIENS,1:$P(RXIENS,"","",$L(RXIENS,"","")-1)),$S(PARIEN:.07,REFIEN:6,1:38),""I"") S VAL=$$GET1^DIQ(200,VAL,1) S:VAL="""" VAL=""UNK"""
^APSSCOMD(1,1,18,2,0)="^9009033.312^2^2^3051006^^"
^APSSCOMD(1,1,18,2,1,0)="This fields returns the clerk for partial and refills and the"
^APSSCOMD(1,1,18,2,2,0)="finishing person for the original prescription."
^APSSCOMD(1,1,19,0)="Safety Cap Indicator^5^^Z"
^APSSCOMD(1,1,19,1)="S VAL='$$GET1^DIQ(55,$P(RX0,U,2),.02,""I"")"
^APSSCOMD(1,1,20,0)="Chronic Medication^4.5^52,9999999.02^I"
^APSSCOMD(1,1,21,0)="Patient Date Of Birth^3.1^^Z"
^APSSCOMD(1,1,21,1)="S VAL=$$FMTE^XLFDT($$GET1^DIQ(2,$$GETP(RX0,2),.03,""I""),""5Z"")"
^APSSCOMD(1,1,22,0)="Patient Gender^3.2^2,.02^Z"
^APSSCOMD(1,1,22,1)="S VAL=$$GET1^DIQ(2,$P(RX0,U,2),.02)"
^APSSCOMD(1,1,22,2,0)="^^1^1^3081211"
^APSSCOMD(1,1,22,2,1,0)="Patient Gender Designator"
^APSSCOMD(1,1,23,0)="Patient Address^3.3^^Z"
^APSSCOMD(1,1,23,1)="S VAL=$$PADDR^APSSLIC($P(RX0,U,2))"
^APSSCOMD(1,1,23,2,0)="^^1^1^3081211"
^APSSCOMD(1,1,23,2,1,0)="Patient Address"
^APSSCOMD(1,1,24,0)="Provider Class^31^200,53.5^ZR"
^APSSCOMD(1,1,24,1)="S VAL=$$GET1^DIQ($S(PARIEN:52.2,REFIEN:52.1,1:52),$S(PARIEN!REFIEN:RXIENS,1:$P(RXIENS,"","",$L(RXIENS,"","")-1)),$S(PARIEN:6,REFIEN:15,1:4),""I"") S:VAL VAL=$$GET1^DIQ(200,VAL,53.5)"
^APSSCOMD(1,1,24,2,0)="^^1^1^3081211"
^APSSCOMD(1,1,24,2,1,0)="Provider Class"
^APSSCOMD(1,1,25,0)="Provider DEA#^32^200,53.2^ZR"
^APSSCOMD(1,1,25,1)="S VAL=$$GET1^DIQ($S(PARIEN:52.2,REFIEN:52.1,1:52),$S(PARIEN!REFIEN:RXIENS,1:$P(RXIENS,"","",$L(RXIENS,"","")-1)),$S(PARIEN:6,REFIEN:15,1:4),""I"") S:VAL VAL=$$GET1^DIQ(200,VAL,53.2)"
^APSSCOMD(1,1,25,2,0)="^^1^1^3081211"
^APSSCOMD(1,1,25,2,1,0)="Provider DEA#"
^APSSCOMD(1,1,26,0)="Site DEA#^33^^Z"
^APSSCOMD(1,1,26,1)="S VAL=$$SDEA^APSSLIC($P(RX0,U,5))"
^APSSCOMD(1,1,26,2,0)="^^1^1^3081211"
^APSSCOMD(1,1,26,2,1,0)="Site DEA#"
^APSSCOMD(1,1,27,0)="Site Name^34^^Z"
^APSSCOMD(1,1,27,1)="S VAL=$$SNAME^APSSLIC($P(RX0,U,5))"
^APSSCOMD(1,1,27,2,0)="^^1^1^3081211"
^APSSCOMD(1,1,27,2,1,0)="Site Name"
^APSSCOMD(1,1,28,0)="Issue Date^35^52,1^Z"
^APSSCOMD(1,1,28,1)="S VAL=$$FMTE^XLFDT($P(RX0,U,13),""5Z"")"
^APSSCOMD(1,1,28,2,0)="^^1^1^3081211"
^APSSCOMD(1,1,28,2,1,0)="Issue Date"
^APSSCOMD(1,1,29,0)="Login Date^37^52,21^Z"
^APSSCOMD(1,1,29,1)="S VAL=$$FMTE^XLFDT($P(RX2,U),""5Z"")"
^APSSCOMD(1,1,29,2,0)="^^1^1^3081211"
^APSSCOMD(1,1,29,2,1,0)="Login Date"
^APSSCOMD(1,1,30,0)="License Number^36^200.541,1^ZR"
^APSSCOMD(1,1,30,1)="S VAL=$$EP1^APSSLIC($$GET1^DIQ($S(PARIEN:52.2,REFIEN:52.1,1:52),$S(PARIEN!REFIEN:RXIENS,1:$P(RXIENS,"","",$L(RXIENS,"","")-1)),$S(PARIEN:6,REFIEN:15,1:4),""I""),2)"
^APSSCOMD(1,1,30,2,0)="^^17^17^3081211"
^APSSCOMD(1,1,30,2,1,0)="Provider License Number"
^APSSCOMD(1,1,30,2,2,0)=""
^APSSCOMD(1,1,30,2,3,0)=" Parameter 1 passed to APSSLIC routine represents the Provider Internal Entry Number"
^APSSCOMD(1,1,30,2,4,0)=" Paramneter 2 represents the processing method which is described below.."
^APSSCOMD(1,1,30,2,5,0)=""
^APSSCOMD(1,1,30,2,6,0)=" Method 1"
^APSSCOMD(1,1,30,2,7,0)=" Match it to the state the facility is in"
^APSSCOMD(1,1,30,2,8,0)=" If there is no license for that state then return any valid license"
^APSSCOMD(1,1,30,2,9,0)=" If no valid license found for any state then return NULL"
^APSSCOMD(1,1,30,2,10,0)=""
^APSSCOMD(1,1,30,2,11,0)=" Method 2"
^APSSCOMD(1,1,30,2,12,0)=" There is no license for the state the facility is in then,"
^APSSCOMD(1,1,30,2,13,0)=" return NULL even if other states have a valid license defined."
^APSSCOMD(1,1,30,2,14,0)=""
^APSSCOMD(1,1,30,2,15,0)=" Method 3"
^APSSCOMD(1,1,30,2,16,0)=" Return first valid license found regardless of state"
^APSSCOMD(1,1,30,2,17,0)=" No valid license found, then return NULL"
^APSSCOMD(1,1,"B","CHK_ID",16)=""
^APSSCOMD(1,1,"B","COM_ID",15)=""
^APSSCOMD(1,1,"B","Chronic Medication",20)=""
^APSSCOMD(1,1,"B","Dispense Units",12)=""
^APSSCOMD(1,1,"B","Dispensed Drug NDC",1)=""
^APSSCOMD(1,1,"B","Dispensed Drug Name",7)=""
^APSSCOMD(1,1,"B","Dispensed Qty",3)=""
^APSSCOMD(1,1,"B","Fill Date",13)=""
^APSSCOMD(1,1,"B","Fill Priority Indicator",8)=""
^APSSCOMD(1,1,"B","Instructions/SIG",2)=""
^APSSCOMD(1,1,"B","Issue Date",28)=""
^APSSCOMD(1,1,"B","License Number",30)=""
^APSSCOMD(1,1,"B","Login Date",29)=""
^APSSCOMD(1,1,"B","Message Date / Time Stamp",14)=""
^APSSCOMD(1,1,"B","Patient Address",23)=""
^APSSCOMD(1,1,"B","Patient Date Of Birth",21)=""
^APSSCOMD(1,1,"B","Patient Gender",22)=""
^APSSCOMD(1,1,"B","Patient ID",4)=""
^APSSCOMD(1,1,"B","Patient Name",5)=""
^APSSCOMD(1,1,"B","Pharmacist Initials",18)=""
^APSSCOMD(1,1,"B","Physician Name",11)=""
^APSSCOMD(1,1,"B","Provider Class",24)=""
^APSSCOMD(1,1,"B","Provider DEA#",25)=""
^APSSCOMD(1,1,"B","Refills Remaining",9)=""
^APSSCOMD(1,1,"B","Retail Price",17)=""
^APSSCOMD(1,1,"B","Safety Cap Indicator",19)=""
^APSSCOMD(1,1,"B","Script Number",6)=""
^APSSCOMD(1,1,"B","Site DEA#",26)=""
^APSSCOMD(1,1,"B","Site Name",27)=""
^APSSCOMD(1,1,"B","Technician Name",10)=""
^APSSCOMD("B","FILL",1)=""
