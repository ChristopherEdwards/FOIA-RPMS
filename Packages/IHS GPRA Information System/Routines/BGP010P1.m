BGP010P1 ; IHS/CMI/LAB - NO DESCRIPTION PROVIDED 28 Jan 2005 1:34 PM 25 Nov 2007 7:41 PM ; 
 ;;10.0;IHS CLINICAL REPORTING;**1**;JUL 1, 2009
 ;
 ;
 ;SEND OUT BGP TAXONOMIES
 ; The following line prevents the "Disable Options..." and "Move
 ; Routines..." questions from being asked during the install.
 I $G(XPDENV)=1 S (XPDDIQ("XPZ1"),XPDDIQ("XPZ2"))=0
 F X="XPO1","XPZ1","XPZ2","XPI1" S XPDDIQ(X)=0
 I $$VERSION^XPDUTL("BGP")'="10.0" D SORRY(2)
 Q
 ;
PRE ;EP
 ;CHANGE PACKAGE FILE NAME
 S BGPX=0 F  S BGPX=$O(^BGPPEIT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPPEIT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPELIT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPELIT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPELIIT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPELIIT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPCMSIT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPCMSIT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPNPLT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPNPLT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPHEIT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPHEIT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPHEIIT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPHEIIT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPINDTC(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPINDTC(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPINDT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPINDT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPTAXT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPTAXT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPCMSMT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPCMSMT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPSCAT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPSCAT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPICAGT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPICAGT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPICACT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPICACT(" D ^DIK
 F BGPX=0 F  S BGPX=$O(^BGPEOMT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPEOMT(" D ^DIK
 S BGPX=0 F  S BGPX=$O(^BGPEOMIT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPEOMIT(" D ^DIK
 F BGPX=1:1:2000 K ^BGPTAXT(BGPX)
 S BGPX=0 F  S BGPX=$O(^BGPTAXTT(BGPX)) Q:BGPX'=+BGPX  S DA=BGPX,DIK="^BGPTAXTT(" D ^DIK
 F BGPX=1:1:2000 K ^BGPTAXTT(BGPX)
 S X=0 F  S X=$O(^BGPSITE(X)) Q:X'=+X  S $P(^BGPSITE(X,0),U,3)=""
 S X=0 F  S X=$O(^ATXAX(X)) Q:X'=+X  D
 .I $D(^ATXAX(X,21,0)),$P(^ATXAX(X,21,0),U,2)'["9002226.02101A" S $P(^ATXAX(X,21,0),U,2)="9002226.02101A"
 .I $D(^ATXAX(X,41,0)),$P(^ATXAX(X,41,0),U,2)'["9002226.04101P" S $P(^ATXAX(X,41,0),U,2)="9002226.04101P"
 K ATXFLG
 Q
POST ;EP - called from kids build
 ;BGP UNI
 Q
 ;
INSTALLD(BGPSTAL) ;EP - Determine if patch BGPSTAL was installed, where
 ; BGPSTAL is the name of the INSTALL.  E.g "AG*6.0*11".
 ;
 NEW BGPY,DIC,X,Y
 S X=$P(BGPSTAL,"*",1)
 S DIC="^DIC(9.4,",DIC(0)="FM",D="C"
 D IX^DIC
 I Y<1 D IMES Q 0
 S DIC=DIC_+Y_",22,",X=$P(BGPSTAL,"*",2)
 D ^DIC
 I Y<1 D IMES Q 0
 S DIC=DIC_+Y_",""PAH"",",X=$P(BGPSTAL,"*",3)
 D ^DIC
 S BGPY=Y
 D IMES
 Q $S(BGPY<1:0,1:1)
IMES ;
 D MES^XPDUTL($$CJ^XLFSTR("Patch """_BGPSTAL_""" is"_$S(Y<1:" *NOT*",1:"")_" installed.",IOM))
 Q
SORRY(X) ;
 KILL DIFQ
 I X=3 S XPDQUIT=2 Q
 S XPDQUIT=X
 W *7,!,$$CJ^XLFSTR("Sorry....FIX IT!",IOM)
 Q
