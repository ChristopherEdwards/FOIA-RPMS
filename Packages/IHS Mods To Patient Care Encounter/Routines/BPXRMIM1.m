BPXRMIM1 ; IHS/MSC/MGH - Handle computed findings for immunizations. ;21-Apr-2016 16:30;DU;;2.0;CLINICAL REMINDERS;**1001**;Feb 04, 2005
 ;;2.0;CLINICAL REMINDERS;**1001**;Feb 04, 2005;Build 12
 ;=================================================================
 ;This routine is designed to evaluate the immunication forcast
 ;data to determine if an immunization is due for a child requiring a
 ;seried of immunizations
 ;=====================================================================
TD(DFN,TEST,DATE,VALUE,TEXT) ; EP
 ;This computed finding will check the imunization forecast file to find
 ;TD immunizations that are setup in the reminder term for TD
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 S BPXNAME="IHS-TD IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 K ^TMP("PXRMCF",$J,DFN)
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-TD IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-TD IMMUNIZATION",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
TDPED(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;DT-Ped immunizations that are setup in the reminder term for DT-Ped
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-PED DT IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-PED DT IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-PED TD IMMUNIZATION",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
FLU(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;Flu immunizations that are setup in the reminder term for Flu
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-INFLUENZA IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-INFLUENZA IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-INFLUENZA 2013",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
PNEUMO(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;pneumo immunizations that are setup in the reminder term for Pneumo
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-PNEUMOVAX IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-PNEUMOVAX IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-PNEUMOVAX IMMUNIZATION",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
PNEUPED(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;pneumo immunizations that are setup in the reminder term for Pneumo
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-PED PNEUMOCOCCAL IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-PED PNEUMOCOCCAL IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-PED PNEUMOVAX IMMUNIZATION",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
HEPA(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;HepA immunizations that are setup in the reminder term for HepA
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-PED HEPA IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-PED HEPA IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-HEPA IMMUNIZATION",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
HEPADULT(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;HepA ADULT immunizations that are setup in the reminder term for HepA
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-HEP A ADULT IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-HEP A ADULT IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-HEPADULT IMMUNIZATION",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
HEBADULT(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;Hepb Adult immunizations that are setup in the reminder term for HepA
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-HEP B ADULT IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-HEP B ADULT IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-HEBADULT IMMUNIZATION",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
MENING(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;Meningitis immunizations that are setup in the reminder term for HepA
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-MENINGITIS IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-MENINGITIS IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-MENINGITIS IMMUNE",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
TDAP(DFN,TEST,DATE,VALUE,TEXT) ;EP
 ;This computed finding will check the imunization forecast file to find
 ;tdap immunizations that are setup in the reminder term for tdap
 N BPXNAME,BPXTRM,BPXIN,BPXCNT,BPXHI,BPXREM,BPXRTM,BPXTEST,EARLY,LATE,TARGET,LINE,TODAY,COUNT
 K ^TMP("BPXRMCF",$J,DFN)
 S BPXNAME="IHS-TDAP IMMUN 2013",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 I BPXREM="" D
 . S BPXNAME="IHS-TDAP IMMUN 2012",LINE=1,TEST=0,DATE="",VALUE="",TEXT=""
 . S BPXREM="" S BPXREM=$O(^PXD(811.9,"B",BPXNAME,BPXREM))
 Q:BPXREM=""
 S BPXTRM="" S BPXTRM=$O(^PXRMD(811.5,"B","IHS-TDAP IMMUNE",BPXTRM))
 I BPXTRM=""  S TEST=0,TEXT="Reminder term does not exist" Q
 D GETVAR^BPXRMIM2(BPXTRM)
 Q
