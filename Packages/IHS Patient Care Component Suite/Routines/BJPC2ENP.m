BJPC2ENP ; IHS/CMI/LAB - PCC Suite v1.0 patch 1 environment check ;
 ;;2.0;IHS PCC SUITE;;MAY 14, 2009
 ;
 ;
 ;
PRE ;EP 
 ;DD deletion
 NEW DIU
 S DIU=9001025,DIU(0)="" D EN^DIU2
 S DIU=9001025.05,DIU(0)="" D EN^DIU2
 S DIU=9001026,DIU(0)="" D EN^DIU2
 ;
 S BJPCDA=0 F  S BJPCDA=$O(^APCDTHFD(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCDTHFD(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCDINPT(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCDINPT(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCLVSTS(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCLVSTS(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCLCNTL(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCLCNTL(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCLRECD(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCLRECD(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCLDMTX(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCLDMTX(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCLBMI(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCLBMI(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCLPDES(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCLPDES(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCCTXC(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCCTXC(" D ^DIK
 S BJPCDA=0 F  S BJPCDA=$O(^APCLGENG(BJPCDA)) Q:BJPCDA'=+BJPCDA  S DA=BJPCDA,DIK="^APCLGENG(" D ^DIK
 S DIU="^APCDINPT(",DIU(0)="" D EN^DIU2
 S DA=$O(^DIC(19,"B","BDP INPUT CATEGORY",0)) I DA S DIE="^DIC(19,",DR="1///Add/Edit Provider Categories" D ^DIE K DIE,DA,DR
 ;save off hmr status value
 S DA=$O(^APCDSTGC("B","ASTHMA",0)) I DA S DIK="^APCDSTGC(" D ^DIK  ;delete asthma for pov stage
 ;
 S X="ASTHMA PATIENT-FLU SHOT",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: FLU SHOT;.04///@" D ^DIE K DIE,DA,DR
 S X="ASTHMA - MANAGEMENT PLAN",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: ACTION PLAN;.04///@" D ^DIE K DIE,DA,DR
 S X="ASTHMA - ADD/INCREASE INHALED STEROIDS",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: ADD/INCREASE INHALED STEROIDS;.04///@" D ^DIE K DIE,DA,DR
 S X="ASTHMA - PRIMARY CARE PROVIDER",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: PRIMARY CARE PROVIDER;.04///@" D ^DIE K DIE,DA,DR
 S X="ASTHMA - SEVERITY CLASSIFICATION",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: SEVERITY CLASSIFICATION;.04///@" D ^DIE K DIE,DA,DR
 S X="ASTHMA ACTION PLAN",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: ACTION PLAN;.04///@" D ^DIE K DIE,DA,DR
 S X="ASTHMA CONTROL CLASSIFICATION",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: CONTROL CLASSIFICATION;.04///@" D ^DIE K DIE,DA,DR
 S X="ASTHMA FLU SHOT",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: FLU SHOT;.04///@" D ^DIE K DIE,DA,DR
 S X="INCREASED RISK FOR ASTHMA EXACERBATION",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///ASTHMA: INCREASED RISK FOR EXACERBATION;.04///@" D ^DIE K DIE,DA,DR
 S X="RUBELLA VACCINATION",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".01///RUBELLA IMMUNIZATION (ADULT);.04///@" D ^DIE K DIE,DA,DR
 S X="NON-ENDEMIC TB",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".03///D" D ^DIE K DIE,DA,DR
 S DA=$O(^APCHSUP("B","ASTHMA",0)) I DA S DIE="^APCHSUP(",DR=".01///ASTHMA PATIENT CARE SUMMARY" D ^DIE K DIE,DA,DR
 S DA=$O(^APCHSCMP("B","FAMILY MEDICAL HISTORY",0)) I DA S DIE="^APCHSCMP(",DR=".01///FAMILY HEALTH HISTORY" D ^DIE
 S DA=$O(^APCHSCMP("B","TREATMENT PROMPTS",0)) I DA S DIE="^APCHSCMP(",DR=".01///BEST PRACTICE PROMPTS" D ^DIE
 K DIE,DA,DR
 ;SET REMINDERS TO DELETED IF THEY EXIST
 S X="REHAB/FUNCTIONAL SCREEN",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".03///D" D ^DIE K DIE,DA,DR
 S X="HEARING TEST ANNUAL",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".03///D" D ^DIE K DIE,DA,DR
 S X="ENDEMIC TB",DIC="^APCHSURV(",DIC(0)="M" D ^DIC I Y'=-1 S DA=+Y I DA S DIE="^APCHSURV(",DR=".03///D" D ^DIE K DIE,DA,DR
 K ^APCHTMP("HMR STATUS")
 S X=0 F  S X=$O(^APCHSURV(X)) Q:X'=+X  S ^APCHTMP("HMR STATUS",X)=$P(^APCHSURV(X,0),U)_U_$P(^APCHSURV(X,0),U,3)
 ;QMAN PRE
 NEW DA,DIE,DR
 S DA=$O(^APCDTKW("B","RHC",0))
 I DA S DIK="^APCDTKW(" D ^DIK
 D PRE^AMQQPOST
 D M^BJPC2EV3
 Q
