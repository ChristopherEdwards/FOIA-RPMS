AGFACE6 ; IHS/ASDS/EFG - FACE SHEET (RAILROAD RETIREMENT) ;
 ;;7.1;PATIENT REGISTRATION;**2**;JAN 31, 2007
 G END:'$D(^AUPNRRE(DFN,0)) W !,$G(AG("-")),!,"RAILROAD RETIREMENT:",!,"TYPE",?19,"NUMBER",?46,"ELIG. DATE",?60,"ELIG. END DATE"
 F AG=1:1 S AG("DRENT")=AG,DIC=9000005.11,DA=DFN,DR=.02 D ^AGDICLK Q:$D(AG("LKERR"))  D L3A
 S DIC=9000005,DR=2101,DA=DFN D ^AGDICLK I $D(AG("LKPRINT")),AG("LKPRINT")]"" W !?3,"NAME: ",AG("LKPRINT")
 S DR=2102 D ^AGDICLK I $D(AG("LKPRINT")),AG("LKPRINT")]"" W !?3,"DATE OF BIRTH: ",AG("LKPRINT")
END Q
L3A S DA=DFN,DIC=9000005.11,AG("DRENT")=AG,DR=.03 D ^AGDICLK Q:$D(AG("LKERR"))
 W !,"  ",AG("LKPRINT")
 ;S DIC=9000005,DR=.03,DA=DFN D ^AGDICLK Q:$D(AG("LKERR"))  ;IHS/SD/TPF AG*7.1*2 IM23259
 I AG("LKPRINT")="D" D  ;IHS/SD/TPF AG*7.1*2 IM23259
 .W ?19,$$GET1^DIQ(9000005.11,AG_","_DA_",",.06)
 I AG("LKPRINT")'="D" D  ;IHS/SD/TPF AG*7.1*2 IM23259
 .S DIC=9000005,DR=.03,DA=DFN D ^AGDICLK Q:$D(AG("LKERR"))
 .W ?19,AG("LKPRINT"),$P(^AUPNRRE(DFN,0),U,4)
 S AG("DRENT")=AG,DR=.01,DIC=9000005.11 D ^AGDICLK Q:$D(AG("LKERR"))  W ?46,AG("LKPRINT")
 S AG("DRENT")=AG,DR=.02,DIC=9000005.11 D ^AGDICLK Q:$D(AG("LKERR"))  W ?60,AG("LKPRINT")
 Q
