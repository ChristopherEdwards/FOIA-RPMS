BCHUEDT1 ; IHS/TUCSON/LAB - EDIT A RECORD ;  [ 10/28/96  2:05 PM ]
 ;;1.0;IHS RPMS CHR SYSTEM;;OCT 28, 1996
 ;
 D ^BCHUIN
 D GETDATE
 I BCHDATE="" W !!,"No Date entered!" D EOJ Q
 D GETPROV
 K BCHR,BCHRRECS,BCHVRECS D RECLKUP
 I '$G(BCHR) D EOJ Q
 D EDIT
 D EOJ
 Q
GETDATE ; GET DATE OF ENCOUNTER
 W !
 S BCHDATE=""
 S DIR(0)="DO^:"_DT_":EPT",DIR("A")="Enter DATE OF SERVICE" D ^DIR K DIR S:$D(DUOUT) DIRUT=1
 Q:$D(DIRUT)
 S %DT="ET" D ^%DT G:Y<0 GETDATE
 I Y>DT W "  <Future dates not allowed>",$C(7),$C(7) K X G GETDATE
 K BCHODAT
 S BCHDATE=Y
 ;
 Q
 ;
GETPROV ;get location of encounter
 S BCHPROV=""
 S DIC("A")="Enter CHR (if known): ",DIC="^VA(200,",DIC(0)="AEMQ" D ^DIC K DIC,DA
 Q:Y<0
 S BCHPROV=+Y
 Q
EDIT ;
 S BCHEN1=1
 D DISP^BCHUEDT
 Q
 ;
RECLKUP ;
 D ^BCHULKUP
 Q
EOJ ; END OF JOB
 K BCHPROV,BCHDATE,DFN,BCHODAT,BCHR,BCHEN1
 Q
 ;
