BHLOBRX ; cmi/sitka/maw - BHL GIS OBR/OBX Segment setup ; 
 ;;3.01;BHL IHS Interfaces with GIS;;JUL 01, 2001
 ;;
 ;
 ;this routine will setup all the necessary INDA arrays for the
 ;OBR/OBX segments
 ;
MAIN ;-- this is the main routine driver
 Q:BHL("VIEN")=""
 S BHLFNUM=9000010
 F   S BHLFNUM=$O(^DIC(BHLFNUM)) Q:BHLFNUM>9000010.99  D
 . S BHLG=$G(^DIC(BHLFNUM,0,"GL"))
 . S BHLGBAD=BHLG_"""AD"",BHL(""VIEN""),BHLIEN)"
 . S BHLCNT=0
 . S BHLIEN=0 F  S BHLIEN=$O(@BHLGBAD) Q:'BHLIEN  D
 .. S BHLCNT=BHLCNT+1
 .. S INDA(BHLFNUM,BHLCNT)=BHLIEN
 Q
 ;
MSR ;-- setup variables form MSR
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.01
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.01,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.01,INDA,.01)
 S BHL("VALC")=$S(BHL("VALI")'="":$$VAL^XBDIQ1(9999999.07,BHL("VALI"),.02),1:"")
 D REST
 Q
 ;
EYE ;-- setup variables form EYE
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.04
 D REST
 Q
 ;
LAB ;-- setup variables form LAB
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.09
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.09,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.09,INDA,.01)
 S BHL("VALC")="LAB"
 D REST
 Q
 ;
SK ;-- setup variables form SK
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.12
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.12,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9999999.28,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(9999999.07,BHL("VALI"),.02)
 D REST
 Q
 ;
XAM ;-- setup variables form XAM
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.13
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.13,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.13,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(9999999.15,BHL("VALI"),.02)
 D REST
 Q
 ;
TRT ;-- setup variables form TRT 
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.15
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.15,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.15,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(9999999.17,BHL("VALI"),.02)
 D REST
 Q
 ;
PED ;-- setup variables form PED
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.16
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.16,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.16,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(9999999.09,BHL("VALI"),.02)
 D REST
 Q
 ;
PT ;-- setup variables form PT
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.17
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.17,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.17,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(9999999.46,BHL("VALI"),1)
 D REST
 Q
 ;
CPT ;-- setup variables form CPT
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.18
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.18,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.18,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(81,BHL("VALI"),2)
 D REST
 Q
 ;
DXP ;-- setup variables form DXP
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.21
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.21,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.21,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(9999999.68,BHL("VALI"),.01)
 D REST
 Q
 ;
RAD ;-- setup variables form RAD
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.22
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.22,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.22,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(71,BHL("VALI"),9)
 D REST
 Q
 ;
HF ;-- setup variables form HF
 K BHL("VALI"),BHL("VALN"),BHL("VALC")
 S BHL("FNUM")=9000010.23
 S BHL("VALI")=$$VALI^XBDIQ1(9000010.23,INDA,.01)
 S BHL("VALN")=$$VAL^XBDIQ1(9000010.23,INDA,.01)
 S BHL("VALC")=$$VAL^XBDIQ1(9999999.64,BHL("VALI"),.02)
 D REST
 Q
 ;
REST ;-- common variables for OBR/OBX
 S BHL("FNM")=$P($G(^DIC(BHL("FNUM"),0)),U)
 S BHL("FABB")=$E($P($G(^DIC(BHL("FNUM"),0,"GL")),"("),7,9)
 Q
 ;
