BHLZP2I ; cmi/sitka/maw - BHL Process Inbound ZP2 Segment ; 
 ;;3.01;BHL IHS Interfaces with GIS;;JUL 01, 2001
 ;
 ;this routine will process the inbound ZP2 segment
 ;
MAIN ;-- this is the main routine driver
 D PROCESS,EOJ
 Q
 ;
PROCESS ;-- process the segment
 Q:'$O(@BHLTMP@(0))
 S BHLDA=0 F  S BHLDA=$O(@BHLTMP@(BHLDA)) Q:BHLDA=""  D
 . S BHLDE=$G(@BHLTMP@(BHLDA,1))
 . S BHLDLRU=$G(@BHLTMP@(BHLDA,2))
 . S BHLMRRD=$G(@BHLTMP@(BHLDA,3))
 . S BHLMRVD=$G(@BHLTMP@(BHLDA,4))
 . S BHLTEN=$G(@BHLTMP@(BHLDA,5))
 . S BHLCHS=$P($G(@BHLTMP@(BHLDA,6)),CS,2)
 . S BHLBT=$G(@BHLTMP@(BHLDA,7))
 . S BHLDLU=$G(@BHLTMP@(BHLDA,8))
 . S BHLABOD=$G(@BHLTMP@(BHLDA,9))
 . S BHLABED=$G(@BHLTMP@(BHLDA,10))
 . S BHLSSN=$P($G(@BHLTMP@(BHLDA,11)),CS)
 . S BHLSSNR=$P($G(@BHLTMP@(BHLDA,12)),CS,2)
 . S BHLBPC=$P($G(@BHLTMP@(BHLDA,13)),CS)
 . S BHLBPS=$S($P($G(@BHLTMP@(BHLDA,13)),CS,2):$P($G(@BHLTMP@(BHLDA,13)),CS,2),1:"")
 . S BHLBCN=$G(@BHLTMP@(BHLDA,14))
 . S BHLTOM=$P($G(@BHLTMP@(BHLDA,15)),CS,2)
 . S BHLTQ=$G(@BHLTMP@(BHLDA,16))
 . S BHLIBQ=$G(@BHLTMP@(BHLDA,17))
 . S BHLCB=$P($G(@BHLTMP@(BHLDA,18)),CS,2)
 . S BHLCRD=$G(@BHLTMP@(BHLDA,19))
 . S BHLSOD=$S($G(@BHLTMP@(BHLDA,20)):$O(^DIC(5,"C",$G(@BHLTMP@(BHLDA,20)),0)),1:"")
 . S BHLDCN=$G(@BHLTMP@(BHLDA,21))
 . S BHLCC=$G(@BHLTMP@(BHLDA,22))
 . S BHLTMVF=$P($G(@BHLTMP@(BHLDA,23)),CS,2)
 . S BHLRVF=$G(@BHLTMP@(BHLDA,24))
 . S BHLDED=$G(@BHLTMP@(BHLDA,25))
 . S BHLEMC=$P($G(@BHLTMP@(BHLDA,26)),CS,2)
 . S BHLFN=$G(@BHLTMP@(BHLDA,31))
 . S BHLFBPC=$P($G(@BHLTMP@(BHLDA,32)),CS)
 . S BHLFBPS=$S($P($G(@BHLTMP@(BHLDA,32)),CS,2):$P($G(@BHLTMP@(BHLDA,13)),CS,2),1:"")
 . S BHLMBPC=$P($G(@BHLTMP@(BHLDA,33)),CS)
 . S BHLMBPS=$S($P($G(@BHLTMP@(BHLDA,33)),CS,2):$P($G(@BHLTMP@(BHLDA,13)),CS,2),1:"")
 S BHLFL=9000001,BHLX=BHLPAT
 S BHLFLD=.02,BHLVAL=BHLDE X BHLDIE
 S BHLFLD=.03,BHLVAL=BHLDLRU X BHLDIE
 S BHLFLD=.04,BHLVAL=BHLMRRD X BHLDIE
 S BHLFLD=.05,BHLVAL=BHLMRVD X BHLDIE
 S BHLFLD=.09,BHLVAL=BHLCHS X BHLDIE
 S BHLFLD=.13,BHLVAL=BHLBT X BHLDIE
 S BHLFLD=.16,BHLVAL=BHLDLU X BHLDIE
 S BHLFLD=.17,BHLVAL=BHLABOD X BHLDIE
 S BHLFLD=.18,BHLVAL=BHLABED X BHLDIE
 S BHLFLD=.23,BHLVAL=BHLSSN X BHLDIE
 S BHLFLD=.24,BHLVAL=BHLSSNR X BHLDIE
 S BHLFLD=1105,BHLVAL=BHLBCN X BHLDIE
 S BHLFLD=1108,BHLVAL=BHLTOM X BHLDIE
 S BHLFLD=1109,BHLVAL=BHLTQ X BHLDIE
 S BHLFLD=1110,BHLVAL=BHLIBQ X BHLDIE
 S BHLFLD=1111,BHLVAL=BHLCB X BHLDIE
 S BHLFLD=1113,BHLVAL=BHLCRD X BHLDIE
 S BHLFLD=1115,BHLVAL=BHLSOD X BHLDIE
 S BHLFLD=1116,BHLVAL=BHLDCN X BHLDIE
 S BHLFLD=1117,BHLVAL=BHLCC X BHLDIE
 S BHLFLD=1119,BHLVAL=BHLTMVF X BHLDIE
 S BHLFLD=1121,BHLVAL=BHLRVF X BHLDIE
 S BHLFLD=1123,BHLVAL=BHLDED X BHLDIE
 S BHLFLD=1125,BHLVAL=BHLEMC X BHLDIE
 S BHLFLD=2602,BHLVAL=BHLFBPC X BHLDIE
 S BHLFLD=2603,BHLVAL=BHLFBPS X BHLDIE
 S BHLFLD=2605,BHLVAL=BHLMBPC X BHLDIE
 S BHLFLD=2606,BHLVAL=BHLMBPS X BHLDIE
 S BHLFL=2
 S BHLFLD=.092,BHLVAL=BHLBPC X BHLDIE
 S BHLFLD=.093,BHLVAL=BHLBPS X BHLDIE
 S BHLFLD=2401,BHLVAL=BHLFN X BHLDIE
 Q
 ;
REGUP ;EP - update registration dates call from BHLPIDI if no ZP2 seg
 N BHLFL
 S BHLFL=9000001,BHLX=BHLPAT
 S BHLDLU=DT,BHLDLRU=DT
 S BHLFLD=.03,BHLVAL=BHLDLRU X BHLDIE
 S BHLFLD=.16,BHLVAL=BHLDLU X BHLDIE
 Q
 ;
EOJ ;-- kill variables
 K @BHLTMP
 K BHLDE,BHLDLRU,BHLMRRD,BHLMRVD,BHLTEN,BHLCHS,BHLBT,BHLDLU,BHLABOD
 K BHLABED,BHLSSN,BHLSSNR,BHLBPC,BHLBPS,BHLBCN,BHLTOM,BHLTQ,BHLIBQ
 K BHLCB,BHLCRD,BHLSOD,BHLDCN,BHLCC,BHLTMVF,BHLRVF,BHLDED,BHLEMC
 K BHLFN,BHLFBPC,BHLFBPS,BHLMBPC,BHLMBPS,BHLDA,BHLFLD,BHLFL,BHLVAL
 K BHLX
 Q
 ;
