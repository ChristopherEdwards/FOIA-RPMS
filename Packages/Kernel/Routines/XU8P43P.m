XU8P43P ;SF-OCIO/CJS - ASSOCIATE STATIONS TO VISNS ;6/27/98  23:20 [ 04/02/2003   8:29 AM ]
 ;;8.0;KERNEL;**1005,1007**;APR 1, 2003 
 ;;8.0;KERNEL;**43**;
PRE ; PRE INSTALL FOR XU*8*43
 I $G(^DD(4,14,0))']"ASSOCIATIONS^4.014P" D
 . S DIK="^DD(4,",DA=14,DA(1)=4 D ^DIK
 I $G(^DD(4.014,.01,1,2,0))["^AC" D
 . S DIK="^DD(4.014,.01,1,",DA=2,DA(1)=.01,DA(2)=4 D ^DIK K ^DIC(4,"AC")
 Q
POST ; POST INSTALL FOR XU*8*43
 ; FIRST, SET UP VISNS
 N FDA,IEN S FDA(4.1,"?+1,",.01)="VISN",FDA(4.1,"?+1,",1)="VETERANS INTEGRATED SERVICE NETWORK"
 D UPDATE^DIE("E","FDA","IEN")
 N VISN,VIS F VISN=1:1:22 S VIS="VISN "_VISN I '$D(^DIC(4,"B",VIS)) D
 . S FDA(4,"+1,",.01)=VIS,FDA(4,"+1,",13)="VISN"
 . D UPDATE^DIE("E","FDA")
 . Q
 ; SET UP TMP ARRAY OF ASSOCIATIONS
 S I=0 F  S I=I+1,VIS=$P($T(TABLE+I),";",3) Q:VIS=""  S VIS($P($T(TABLE+I),";",4))=VIS
 ; LOOP THROUGH INSTITUTION FILE SETTING UP ASSOCIATIONS
 N INST,SN S INST=0 F  S INST=$O(^DIC(4,INST)) Q:INST'>0  S SN=+$G(^DIC(4,INST,99)) D:SN
 . Q:'$D(VIS(SN))
 . S FDA(4,"?1,",.01)="`"_INST
 . S FDA(4.014,"+2,?1,",.01)=1,FDA(4.014,"+2,?1,",1)="VISN "_VIS(SN)
 . D UPDATE^DIE("E","FDA")
 . Q
 Q
TABLE ;;
 ;;1;402
 ;;1;405
 ;;1;518
 ;;1;523
 ;;1;525
 ;;1;608
 ;;1;627
 ;;1;631
 ;;1;650
 ;;1;689
 ;;2;500
 ;;2;514
 ;;2;528
 ;;2;532
 ;;2;670
 ;;3;526
 ;;3;527
 ;;3;533
 ;;3;561
 ;;3;604
 ;;3;620
 ;;3;630
 ;;3;632
 ;;4;460
 ;;4;503
 ;;4;529
 ;;4;540
 ;;4;542
 ;;4;562
 ;;4;595
 ;;4;642
 ;;4;645
 ;;4;646
 ;;4;693
 ;;5;512
 ;;5;566
 ;;5;613
 ;;5;688
 ;;6;517
 ;;6;558
 ;;6;565
 ;;6;590
 ;;6;637
 ;;6;652
 ;;6;658
 ;;6;659
 ;;7;508
 ;;7;509
 ;;7;521
 ;;7;534
 ;;7;544
 ;;7;557
 ;;7;619
 ;;7;679
 ;;7;680
 ;;7;766
 ;;8;516
 ;;8;546
 ;;8;548
 ;;8;573
 ;;8;594
 ;;8;672
 ;;8;673
 ;;9;581
 ;;9;596
 ;;9;603
 ;;9;614
 ;;9;621
 ;;9;622
 ;;9;626
 ;;10;538
 ;;10;539
 ;;10;541
 ;;10;552
 ;;10;757
 ;;11;506
 ;;11;515
 ;;11;550
 ;;11;553
 ;;11;583
 ;;11;610
 ;;11;655
 ;;12;535
 ;;12;537
 ;;12;556
 ;;12;578
 ;;12;585
 ;;12;607
 ;;12;676
 ;;12;695
 ;;13;437
 ;;13;438
 ;;13;568
 ;;13;579
 ;;13;618
 ;;13;656
 ;;14;555
 ;;14;574
 ;;14;584
 ;;14;592
 ;;14;597
 ;;14;636
 ;;15;452
 ;;15;543
 ;;15;589
 ;;15;609
 ;;15;647
 ;;15;657
 ;;15;677
 ;;15;686
 ;;16;502
 ;;16;520
 ;;16;564
 ;;16;580
 ;;16;586
 ;;16;598
 ;;16;623
 ;;16;629
 ;;16;635
 ;;16;667
 ;;17;522
 ;;17;549
 ;;17;591
 ;;17;671
 ;;17;674
 ;;18;501
 ;;18;504
 ;;18;519
 ;;18;644
 ;;18;649
 ;;18;678
 ;;18;756
 ;;19;436
 ;;19;442
 ;;19;554
 ;;19;567
 ;;19;575
 ;;19;617
 ;;19;660
 ;;19;666
 ;;20;463
 ;;20;531
 ;;20;648
 ;;20;653
 ;;20;663
 ;;20;668
 ;;20;687
 ;;20;692
 ;;21;358
 ;;21;459
 ;;21;570
 ;;21;612
 ;;21;640
 ;;21;654
 ;;21;662
 ;;22;593
 ;;22;600
 ;;22;601
 ;;22;605
 ;;22;664
 ;;22;665
 ;;22;691
 ;;22;752
 ;;;
