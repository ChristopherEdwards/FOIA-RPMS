BMXUTL6 ; IHS/OIT/HMW - BMXNET INSTALLATION CALLS ;
 ;;4.0;BMX;;JUN 28, 2010
 ;
 ;
POST ;EP - Called from BMX Installation postinit
 ;
 ;Add BMX AV CODE and BMX CONNECT STATUS to XUS SIGNON broker option
 N BMXFDA,BMXIEN,BMXMSG,BMXIENS,BMXMENN,BMXAVI,BMXCS,BMXOPT,BMXCVC
 S BMXAVI=$O(^XWB(8994,"B","BMX AV CODE",0))
 Q:'+BMXAVI
 S BMXCS=$O(^XWB(8994,"B","BMX CONNECT STATUS",0))
 Q:'+BMXCS
 S BMXCVC=$O(^XWB(8994,"B","BMX CVC",0))
 Q:'+BMXCVC
 S BMXIENS=$O(^DIC(19,"B","XUS SIGNON",0))
 Q:'+BMXIENS
 ;
UPDATE S BMXIENS="?+2,"_BMXIENS_",",DIC(0)=""
 F BMXOPT=BMXAVI,BMXCS,BMXCVC D
 . S BMXFDA(19.05,BMXIENS,.01)=BMXOPT
 . K BMXIEN,BMXMSG
 . D UPDATE^DIE("","BMXFDA","BMXIEN","BMXMSG")
 . Q
 Q
 ;
 ;
 ;
 ;Create BMXNET,APPLICATION user and set attributes
 ;
 ;N BMXFDA,BMXIEN,BMXMSG,BMXIENS,BMXMENN
 ;S BMXIENS = "?+1,"
 ;S BMXFDA(200,BMXIENS,.01)="BMXNET,APPLICATION"
 ;S BMXFDA(200,BMXIENS,2)="1_(a>yr}:3x3ja9\8vbH"
 ;S BMXFDA(200,BMXIENS,11)="$;HOSs|:3w25lLD}Be="
 ;S BMXFDA(200,BMXIENS,11.2)="88888,88888"
 ;S BMXMENN=$O(^DIC(19,"B","BMXRPC",0))
 ;I +BMXMENN S BMXFDA(200.03,"?+2,?+1,",.01)=BMXMENN
 ;K BMXIEN,BMXMSG
 ;S DIC(0)=""
 ;D UPDATE^DIE("","BMXFDA","BMXIEN","BMXMSG")
 Q
