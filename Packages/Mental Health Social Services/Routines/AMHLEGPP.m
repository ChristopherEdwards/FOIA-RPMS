AMHLEGPP ; IHS/CMI/LAB - PRINT ENCOUNTER RECORD ;
 ;;4.0;IHS BEHAVIORAL HEALTH;;MAY 14, 2010
 ;
 ;print individual forms for each member of group
COMP ;EP - do nothing
 Q
PRINT ; EP - print individual forms
 S AMHQUIT=0
 S AMHY=0 F  S AMHY=$O(AMHLEGP("RECS ADDED",AMHY)) Q:AMHY'=+AMHY!(AMHQUIT)  S AMHR=AMHLEGP("RECS ADDED",AMHY) D PRINT1 Q:AMHQUIT
XIT ;
 K AMHY,AMHLEGP,AMHX,AMHR,AMHNRQ
 Q
PRINT1 ;
 S AMHDOLOG=1
 S AMHLEGPF=1
 S AMHEFT=AMHEFTH
 D ^AMHLEFP2
 K AMHLEGPF,AMHDOLOG
 W:$D(IOF) @IOF
 W:$G(AMHGUI) "ZZZZZZZ",!
 Q
TESTGUI ;
 K ^TMP($J,"LORI")
 S AMHGUI=1
 S (AMHLEFT,AMHEFTH)="F" ;WILL BE F, B, S, T, E
 ;ARRAY OF RECORD IENS   AMHLEGP("RECS ADDED",COUNTER)=AMHREC IEN
 S AMHLEGP("RECS ADDED",1)=1000
 S AMHLEGP("RECS ADDED",2)=2100
 D GUIR^XBLM("PRINT^AMHLEGPP","^TMP($J,""LORI"",")
 Q
GUI(AMHARRAY,AMHLEGP,AMHLEFT,AMHEFTH) ;EP -- gui entry point
 K ^TMP($J,"AMHGROUP")
 S AMHARRAY="^TMP($J,""AMHGROUP"")"
 S AMHGUI=1
 ;S (AMHLEFT,AMHEFTH)="F" ;WILL BE F, B, S, T, E
 ;ARRAY OF RECORD IENS   AMHLEGP("RECS ADDED",COUNTER)=AMHREC IEN
 ;S AMHLEGP("RECS ADDED",1)=1000
 ;S AMHLEGP("RECS ADDED",2)=2100
 D GUIR^XBLM("PRINT^AMHLEGPP","^TMP($J,""AMHGROUP"",")
 Q
