AMQQATSQ ; IHS/CMI/THL - OVERRUN FROM AMQQATL ;
 ;;2.0;IHS PCC SUITE;;MAY 14, 2009
 ;-----
SQ ; - ENTRY POINT - from AMQQATL
 I '$D(AMQQGVF),"GL"[$P(AMQQQ,U,3) S Z="" D ZSET^AMQQATL1 S AMQQILIN=AMQQILIN+1,^UTILITY("AMQQ",$J,"LIST",AMQQILIN)="W ?"_(3*AMQQUSQL+3)_","""_$P(AMQQQ,U,2)_Z_""""
 I $D(AMQQLSQF) D SQ1^AMQQATL K ^UTILITY("AMQQ",$J,"SQL"),^UTILITY("AMQQ",$J,"SQXL"),AMQQLSQF,AMQQSQLN Q
 I '$D(AMQQLSQF),$D(^UTILITY("AMQQ",$J,"SQL",0,1)) S AMQQILIN=AMQQILIN+1,^UTILITY("AMQQ",$J,"LIST",AMQQILIN)="W ?9,""(INVERSE SET)""" K ^UTILITY("AMQQ",$J,"SQL")
 I $P(AMQQQ,U,3)="I" N % S %=$P($P(AMQQQ,U,9),";",4) S:"A"[$E(%) %="ALL" S AMQQILIN=AMQQILIN+1,^UTILITY("AMQQ",$J,"LIST",AMQQILIN)="W ?"_(3*AMQQUSQL+3)_",""IMMUNIZED WITH "_$P(AMQQQ,U,2)_" ("_%_")"""
 I  S %=$P(AMQQQ,U,11) I +% S ^UTILITY("AMQQ",$J,"LIST",AMQQILIN)=^UTILITY("AMQQ",$J,"LIST",AMQQILIN)
 Q
 ;
