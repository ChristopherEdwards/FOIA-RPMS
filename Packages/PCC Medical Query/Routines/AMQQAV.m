AMQQAV ; IHS/CMI/THL - AMQQAT SUBROUTINE...GETS COMPARISON VALUES ;
 ;;2.0;IHS PCC SUITE;;MAY 14, 2009
 ;-----
 I $D(AMQQSQRD) D EN1^AMQQAVR G EXIT
 I $D(AMQQSVAL) D  Q
 .K AMQQCOMP
 .I $D(Y) S %=$G(^AMQQ(5,+Y,0)) I $P(%,U,3)=7!($P(%,U,20)="D") S X=AMQQSVAL,%DT="" D ^%DT K:Y<1 AMQQSVAL S:Y>0 AMQQSVAL=Y
 .I '$D(AMQQSVAL) W "  ??",*7 H 1
 .I $D(AMQQSVAL) S AMQQCOMP=+AMQQSVAL
 .K AMQQSVAL
 I $D(AMQQNATF),$P(AMQQNATF,";",2)'="" S AMQQCOMP=$P(AMQQNATF,";",2) Q
RUN D @("COMP"_AMQQFTYP)
EXIT K %DT,A,B,AMQQSQRD
 Q
 ;
COMPA D COMPA^AMQQAV0
 Q
 ;
COMPD I AMQQATNM="ALIVE" D ALIVE Q
 D COMPD^AMQQAV0
 Q
 ;
COMPS D COMPS^AMQQAV0
 Q
 ;
COMPN D COMPN^AMQQAV0
 Q
 ;
COMPL S DIC("A")="Enter "_AMQQATNM_": "
 S DIC=$P(^AMQQ(1,AMQQLINK,0),U,2)
 S DIC(0)="AEQ"
 D ^DIC
 K DIC
 I X=U S AMQQQUIT="" Q
 I X="" Q
 S AMQQCOMP=+Y
 Q
 ;
COMPQ D COMPQ^AMQQAV1
 Q
 ;
COMPF D COMPF^AMQQAV1
 Q
 ;
COMPZ D COMPZ^AMQQAV1
 Q
 ;
COMPB D ^AMQQAVB
 Q
 ;
COMPT D COMPT^AMQQAV2
 Q
 ;
COMPC S AMQQCOMP=AMQQCHRT K AMQQCHRT
 Q
 ;
COMPV D COMPV^AMQQAV2
 Q
 ;
COMPX D ^AMQQSQ
 Q
 ;
ALIVE ; ENTRY POINT FROM AMQQAV0
 S %DT="AEX"
 S %DT("A")="Alive at least until exactly what date: "
 S %DT("B")="TODAY"
 I $D(AMQQADAM) S %DT="AE"
 D ^%DT
 I $D(DTOUT) S X=U K DTOUT
 I Y'=-1 S AMQQCOMP=Y Q
 I $E(X)=U S AMQQQUIT=""
 Q
 ;
