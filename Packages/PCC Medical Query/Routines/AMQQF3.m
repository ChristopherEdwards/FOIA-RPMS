AMQQF3 ; IHS/CMI/THL - PARENT FUNCTIONS ;
 ;;2.0;IHS PCC SUITE;;MAY 14, 2009
 ; &&& NEW ROUTINE
 ;-----
PARENT ; ENTRY POINT FROM AMQQCMPL
 N X,Y,Z,%,A,B,C,AMQQPT,AMQQPS,AMQQPV1,AMQQPV2,AMQQPV3,AMQQPV4,AMQQPV,AMQQPI,AMQQPJ
 F AMQQPI=1:1 S %=$P(AMQQCOMP,"~",AMQQPI) Q:%=""  S AMQQPT=$P(%,":",2),AMQQPS=$P(%,":",3),X=$P(%,":",4),AMQQPV1=$P(X,";"),AMQQPV2=$P(X,";",2),AMQQPV3=$P(X,";",3),AMQQPV4=$P(X,";",4) D
 .F AMQQPJ=0:0 S AMQQPJ=$O(^UTILITY("AMQQ",$J,AMQQAG,AMQQUATN,AMQQPJ)) Q:'AMQQPJ  D TEST
EXIT K X
 Q
 ; 
TEST S %=$P(^UTILITY("AMQQ",$J,AMQQAG,AMQQUATN,AMQQPJ),U,4)
 S %=(U_AMQQGR_"("_%_",0)")
 S %=$P(@%,U,7)
 I '% K ^UTILITY("AMQQ",$J,AMQQAG,AMQQUATN,AMQQPJ) Q
 S %=(U_AMQQGR_"("_%_",0)")
 S AMQQPV=$P($G(@%),U,4)
 D @("PAR"_AMQQPT)
 N T
 S T=$T
 I '$D(AMQQNOT)=T K ^UTILITY("AMQQ",$J,AMQQAG,AMQQUATN,AMQQPJ)
 E  I AMQQPI=1 S %=$P(^UTILITY("AMQQ",$J,AMQQAG,AMQQUATN,AMQQPJ),U),%=%_" ("_$E(AMQQPV,1,6)_")",$P(^(AMQQPJ),U,1)=%
 Q
 ;
PARS ; SET OF CODES
PARP ; POINTER
 I AMQQPS="=",AMQQPV'=AMQQPV1 Q
 I AMQQPS="'=",AMQQPV=AMQQPV1 Q
 Q
 ;
PARL ; LOOKUP SET
PARG ; GROUP
 I $D(^UTILITY("AMQQ TAX",$J,AMQQPV4,AMQQPV))+$D(^("*"))=$D(^("--"))
 Q
 ;
