APCDAAPC ; IHS/CMI/LAB - APC CODE ENTRY ;
 ;;2.0;IHS PCC SUITE;;MAY 14, 2009
 ;
START ;
 S APCDTPCC=""
 S DIC="^AUTTRCD(",DIC(0)="AEMQ",DIC("A")="Enter APC CODE:  " D ^DIC K DIC
 G:Y="" XIT
 I Y=-1,X=""!(X="^") S APCDTSKI=1,APCDLOOK="" G XIT
 I Y=-1 S APCDTERR=1,APCDLOOK="" G XIT
 S APCDAPC=+Y
 S APCDICD=$P(^AUTTRCD(APCDAPC,0),U,5)
 S APCDLOOK=$O(^ICD9("BA",APCDICD,0))
 I APCDLOOK="" W !!,$C(7),$C(7),"No ICD Diagnosis for that code - notify supervisor.",! S APCDTERR=1,APCDLOOK="",APCDCPT="" G XIT
 S APCDLOOK="`"_APCDLOOK
 D XIT
 Q
XIT K Y,X,DO,D,DD,DIPGM
 Q
