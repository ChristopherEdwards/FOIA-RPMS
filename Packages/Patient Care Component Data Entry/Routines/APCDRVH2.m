APCDRVH2 ; IHS/CMI/LAB - CONT. HOSP REVIEW ;
 ;;2.0;IHS PCC SUITE;;MAY 14, 2009
 ;;
 ;;BJPC v1.0 patch 1
START ;
 D CHKADM
 D CHKTS
 D CHKAGE
 D DATES
 ;
XIT ;
 Q
 ;
 ;
ERR ;
 D ERR^APCDRV
 Q
CHKTS ;
 I APCDTS="07",AUPNDAYS]"",AUPNDAYS>1 S APCDE="E318",APCDE("FILE")=9000010.02,APCDE("ENTRY")=APCDVINP D ERR Q
 ;I APCDTS="11",AUPNDAYS]"",AUPNDAYS>5479 S APCDE="E319",APCDE("FILE")=9000010.02,APCDE("ENTRY")=APCDVINP D ERR
 ;I APCDTS="05"!(APCDTS="08"),AUPNSEX'="F" S APCDE="E320",APCDE("FILE")="9000010.02,",APCDE("ENTRY")=APCDVINP D ERR
 I APCDTS="05"!(APCDTS="08"),AUPNSEX'="F" S APCDE="E320",APCDE("FILE")="9000010.02",APCDE("ENTRY")=APCDVINP D ERR
 ;I APCDTS="08",AUPNDAYS]"",(AUPNDAYS<3652!(AUPNDAYS>20088)),'$D(APCDACC) S APCDE="E321",APCDE("FILE")=9000010.02,APCDE("ENTRY")=APCDVINP D ERR
 ;I APCDDS="11",AUPNDAYS]"",AUPNDAYS>5479 S APCDE="E323",APCDE("FILE")=9000010.02,APCDE("ENTRY")=APCDVINP D ERR
 ;I APCDDS="05"!(APCDDS="08"),AUPNSEX'="F" S APCDE="E324",APCDE("FILE")="9000010.02,",APCDE("ENTRY")=APCDVINP D ERR
 I APCDDS="05"!(APCDDS="08"),AUPNSEX'="F" S APCDE="E324",APCDE("FILE")="9000010.02",APCDE("ENTRY")=APCDVINP D ERR
 ;I APCDDS="08",AUPNDAYS]"",(AUPNDAYS<3652!(AUPNDAYS>20088)),'$D(APCDACC) S APCDE="E325",APCDE("FILE")=9000010.02,APCDE("ENTRY")=APCDVINP D ERR
 Q
DATES ;
 S X1=$P(APCDVINR,U),X2=$P(^AUPNVSIT(APCDVSIT,0),U) D ^%DTC I X<0 S APCDE("FILE")=9000010,APCDE("ENTRY")=APCDVSIT,APCDE="E326" D ERR Q
 ;I X>99,'$D(APCDACC) S APCDE("FILE")=9000010,APCDE("ENTRY")=APCDVSIT,APCDE="E327" D ERR
 Q
CHKAGE ;
 Q:$D(APCDACC)
 Q:AUPNDAYS>5
 ;I $E($P(APCDPOV("P"),U),1,2)'="V3" S APCDE("FILE")=9000010,APCDE("ENTRY")=APCDVSIT,APCDE="E328" D ERR Q
 Q
CHKADM ;check admission date
 S APCDDIS=$P($P(APCDVINR,U),"."),APCDADM=$P($P(APCDVREC,U),".")
 I APCDDIS<APCDADM S APCDE="E326",APCDE("FILE")=9000010,APCDE("ENTRY")=APCDVSIT D ERR
 I AUPNDOB>APCDADM S APCDE="E329",APCDE("FILE")=9000010,APCDE("ENTRY")=APCDVSIT D ERR
 Q:APCDADM'=AUPNDOB
 Q:$D(APCDACC)
 ;I $E($P(APCDPOV("P"),U),1,2)'="V3" S APCDE="E330",APCDE("FILE")=9000010,APCDE("ENTRY")=APCDVSIT D ERR
 Q
 ;
