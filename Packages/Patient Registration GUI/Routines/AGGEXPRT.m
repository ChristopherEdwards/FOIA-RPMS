AGGEXPRT ;VNGT/HS/ALA-Set up for interfaces/exports ; 03 Nov 2010  8:55 AM
 ;;1.0;PATIENT REGISTRATION GUI;;Nov 15, 2010
 ;
 ;
ADD(AGGDFN) ;PEP - Add a new patient
 NEW AGERR
 I $$AGE^AGGAGE(AGGDFN)<3,('$$DECEASED^AGEDERR2(AGGDFN)) D AUTOADD^BIPATE(AGGDFN,DUZ(2),.AGERR,"")
 ;
 I '$$PATCH^XPDUTL("AG*7.1*9") D
 . S ^XTMP("AGHL7",AGGDFN)=AGGDFN
 . S ^XTMP("AGHL7AG",AGGDFN,"REGISTER")=""
 I $$PATCH^XPDUTL("AG*7.1*9") D
 . S ^XTMP("AGHL7",DUZ(2),AGGDFN)=AGGDFN
 . S ^XTMP("AGHL7AG",DUZ(2),AGGDFN,"REGISTER")=""
 Q
 ;
EDIT(AGGDFN) ;PEP - Edit a patient
 NEW AGERR
 I $$AGE^AGGAGE(AGGDFN)<3,('$$DECEASED^AGEDERR2(AGGDFN)) D AUTOADD^BIPATE(AGGDFN,DUZ(2),.AGERR,"")
 ;
 I '$$PATCH^XPDUTL("AG*7.1*9") D
 . S ^XTMP("AGHL7",AGGDFN)=AGGDFN
 . S ^XTMP("AGHL7AG",AGGDFN,"UPDATE")=""
 I $$PATCH^XPDUTL("AG*7.1*9") D
 . S ^XTMP("AGHL7",DUZ(2),AGGDFN)=AGGDFN
 . S ^XTMP("AGHL7AG",DUZ(2),AGGDFN,"UPDATE")=""
 ;
 D AG^AGHL7
 Q
 ;
DEL(AGGDFN) ;PEP - Delete a patient
 I '$$PATCH^XPDUTL("AG*7.1*9") D
 . K ^XTMP("AGHL7",AGGDFN)
 . K ^XTMP("AGHL7AG",AGGDFN)
 I $$PATCH^XPDUTL("AG*7.1*9") D
 . K ^XTMP("AGHL7",DUZ(2),AGGDFN)
 . K ^XTMP("AGHL7AG",DUZ(2),AGGDFN)
 ;
 NEW DIK,DA
 S DIK="^BIP(",DA=AGGDFN D ^DIK
 Q
