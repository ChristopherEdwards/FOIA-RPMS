BMCRDSP ; IHS/PHXAO/TMJ - OPTION TO DISPLAY REFERRAL ;      [ 09/27/2006  2:03 PM ]
 ;;4.0;REFERRED CARE INFO SYSTEM;**1**;JAN 09, 2006
 ;
START ;
 D GETREF
 Q:BMCQ
 ;
START2 ;EP To Display a Referral Record
 D BROWSE
 D XIT
 Q
 ;
GETREF ; GET REFERRAL
 S BMCQ=1
 W !
 ;BMC*4.0*1 4.15.06 IHS/OIT/FCJ CHANGED NXT SECTION TO DSP LIFO
 ;S DIC="^BMCREF(",DIC(0)="AEMQ",DIC("A")="Select RCIS REFERRAL by Patient or by Referral Date or #: "
 ;D DIC^BMCFMC
 ;Q:Y<1
 ;S BMCRIEN=+Y
 D START^BMCLKID2
 Q:'$G(BMCRIEN)
 S ^DISV(DUZ,"^BMCREF(")=BMCRIEN
 ;BMC*4.0*1 4.15.06 IHS/OIT/FCJ END OF CHANGES
 S BMCQ=0
 Q
 ;
BROWSE ;
 S XBRP="DISP^BMCRD1"
 S XBRC="",XBRX="XIT^BMCRD1",XBIOP=0 D ^XBDBQUE
 ;D VIEWR^XBLM("^BMCVLP")
 Q
XIT ;EP
 D ^BMCKILL
 K ^TMP("BMCRDSP",$J)
 Q
DISP ;EP
 D EN^VALM("BMC RECORD DISPLAY")
 D CLEAR^VALM1
 Q
HDR ; -- header code
 S VALMHDR(1)="User:  "_$P(^VA(200,DUZ,0),U)
 Q
 ;
INIT ; -- init variables and list array
 D EP^BMCRD(BMCRIEN)
 S VALMCNT=$O(^TMP("BMCRDSP",$J,""),-1)
 Q
 ;
HELP ; -- help code
 S X="?" D DISP^XQORM1 W !!
 Q
 ;
EXIT ; -- exit code
 Q
