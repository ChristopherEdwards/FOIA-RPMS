DGRPCE1 ;ALB/MIR/BRM - CONSISTENCY CHECKER EDIT ;10/17/02 1:47pm
 ;;5.3;Registration;**108,226,470,454,489,505**;Aug 13, 1993
 N I F I=1:1:8,16,53,57,58,61,62,63,64,65,66 D SASK
 ;F I=49,50,52 D SASK ;BELOW REPLACED WITH ^IBCNSP2 CALL
 ;OLDS DR(2,2.312)="S DGRPADI="""";.01;1;2;15;8;7;3;6;S DGRPADI=X;I DGRPADI'=""v"" S Y=""@2312"";17///^S X=""`""_DFN;16///^S X=""01"";S Y=""@23121"";@2312;17;16//^S X=$S(DGRPADI=""s"":""02"",1:"""");@23121;9:14;"
 D SAVE Q
SASK I DGER[(","_I_","),DGASK'[(","_I_",") S DGD=DGD_$P($T(@I),";;",2,999),DGASK=DGASK_I_","
 Q
SAVE I $L(@DGDR)+$L(DGD)<241 S @DGDR=@DGDR_DGD,DGD="" Q
 S DGDRC=DGDRC+1,DGDR="DR(1,2,"_DGDRC_")",@DGDR=DGD,DGD="" Q
 ;
 ;
ELIG ;eligibility code...if M11+, use compiled template, otherwise DR string
 I ^%ZOSF("OS")'["M/11+" S DGD=$P($T(14),";;",2,999) D SAVE Q
 N DA,DIE,DR S DIE="^DPT(",DA=DFN,DR="[DG CONSISTENCY CHECKER]" D ^DIE
 Q
 ;
 ;
1 ;;.01;
2 ;;1;
3 ;;.02;
4 ;;.03;
5 ;;.05;
6 ;;.08;
7 ;;.09;
8 ;;.111;S DIE("NO^")="OUTOK";S:X="" Y="@1112";.112;S:X="" Y="@1112";.113;@1112;S EASZIPLK=1;.1112;K EASDO2;.114;S:'$$KEY^DGREGDD1(DUZ,DA) Y="@8";.115;.117;@8;
14 ;;.361;S DGECODE=$S($D(^DIC(8,+X,0)):$P(^(0),"^",1),1:"");S:$S(DGECODE["ALLIED":0,DGECODE["FEDERAL":0,1:1) Y=.323;.309;.323;D ^DGYZODS;S:'DGODS Y="";11500.02;11500.03;
16 ;;.351;
53 ;;.07;.31115;I $S(X']"":1,X=3:1,X=9:1,1:0) S Y="@53";.3111;S:X']"" Y="@53";.3113;S:X']"" Y=.3116;.3114;S:X']"" Y=.3116;.3115:.3117;.2205;.3119;@53;
57 ;;.381;.382///NOW;
58 ;;.322013;S:X'="Y" Y="@589";.322014;.322015;.32201;S:X'="Y" Y="@581";.322011;.322012;@581;.322016;S:X'="Y" Y="@589";.322017;.322018;@589;
61 ;;.131;.132;
62 ;;.331;
63 ;;.1411;S DIE("NO^")="OUTOK";S:X']"" Y=.1414;.1412;S:X']"" Y=.1414;.1413;.1414;.1415;.1416;Q;.14111;K DIE("NO^");
64 ;;.092;.093;
65 ;;.2403;
66 ;;.09;
