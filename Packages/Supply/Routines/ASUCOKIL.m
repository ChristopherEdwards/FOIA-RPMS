ASUCOKIL ; IHS/ITSC/LMH -DAILY UPDATE KILL VARIABLES ; 
 ;;4.2T2;Supply Accounting Mgmt. System;;JUN 30, 2000
 ;This routine provides entry points which kill variables at different
 ;stages of an update run.
KILL ;
 D PSTKL
 K ASUA,ASUC,ASUD,ASUG,ASULA,ASULS,ASULX,ASUN,ASUQ,ASUR,ASURX,ASUS
 K ASUU,ASUX,ASUMB,ASUMC,ASUMY,ZTDESC,ZTRTN,DUOUT,DTOUT
 K:'$D(ASUP("TYP")) ASUK,ASUF
 S $P(^ASUSITE(1,0),U,2)=$S($D(ASUP("TYP")):ASUP("TYP"),1:0)
 Q
PSTKL ;EP; COMMON TRANSACTION PROCESSING ROUTINE VARIABLE KILL
 K ASU,ASUM,ASUMK,ASUMS,ASUMX,ASUSV,ASUT
 F X=3:1:10,12:1:222 K ASUL(X) ;Clear Table Lookup fields
 K DA,DIC,DIE,DR,X,Y
 Q
STAT ;EP; CHECK AND SET FINAL STATUS
 D GETSTAT^ASUCOSTS
 S ASUP("STS")=""
 I ASUP("CKS")>0 D
 .S ASUP("STR")="N",ASUP("STS")="N"
 E  D
 .S ASUP("STR")="Y"
 I ASUP("CKI")>0 D
 .S ASUP("IVR")="N",ASUP("STS")="N"
 E  D
 .S ASUP("IVR")="Y"
 I ASUP("STS")="",ASUP("CKP")=0,ASUP("CKM")=0,ASUP("CKY")=0 D
 .S ASUP("STS")="Y"
 E  D
 .S ASUP("STS")="N"
 D SETSTAT^ASUCOSTS
 Q
