AUM71P2 ;IHS/ASDST/SDR - ICD 9 CODES corrections FOR FY 2007 ; [ 04/16/2007  11:02 AM ]
 ;;07.1;TABLE MAINTENANCE;**2**;APR 16,2007
START ;EP
 ;
SVARS ;;A,C,E,F,L,M,N,O,P,R,S,T,V;Single-character work variables.
 ;
 NEW DA,DIC,DIE,DINUM,DLAYGO,DR,@($P($T(SVARS),";",3))
 S U="^"
 ;
 D RSLT("Beginning ICD Corrections.")
 D DASH,ICD9REV
 D RSLT("End ICD Corrections.")
 Q
 ; -----------------------------------------------------
ADDOK D RSLT($J("",5)_"Added : "_L)
 Q
ADDFAIL D RSLT($J("",5)_$$M(0)_"ADD FAILED => "_L)
 Q
DASH D RSLT(""),RSLT($$REPEAT^XLFSTR("-",$S($G(IOM):IOM-10,1:70))),RSLT("")
 Q
DIE ;EP
 NEW @($P($T(SVARS),";",3))
 LOCK +(@(DIE_DA_")")):10 E  D RSLT($J("",5)_$$M(0)_"Entry '"_DIE_DA_"' IS LOCKED.  NOTIFY PROGRAMMER.") S Y=1 Q
 D ^DIE LOCK -(@(DIE_DA_")")) KILL DA,DIE,DR
 Q
E(L) I L="ICD9REV" Q $P($P($T(@L^AUM71C),";",3),":",1)
DIK NEW @($P($T(SVARS),";",3)) D ^DIK KILL DIK
 Q
FILE NEW @($P($T(SVARS),";",3)) K DD,DO S DIC(0)="L" D FILE^DICN KILL DIC
 Q
M(%) Q $S(%=0:"ERROR : ",%=1:"NOT ADDED : ",1:"")
MODOK D RSLT($J("",5)_"Changed : "_L)
 Q
RSLT(%) S ^(0)=$G(^TMP("AUM2104",$J,0))+1,^(^(0))=% D MES(%)
 Q
MES(%) NEW @($P($T(SVARS),";",3)) D MES^XPDUTL(%)
 Q
IXDIC(DIC,DIC0,D,X,DLAYGO,DINUM) ;EP
 NEW @($P($T(SVARS),";",3))
 S DIC(0)=DIC0
 KILL DIC0
 I '$G(DLAYGO) KILL DLAYGO
 D IX^DIC
 Q Y
ICD9REV ;
 D RSLT($$E("ICD9REV"))
 D RSLT($J("",8)_"CODE      DESCRIPTION")
 D RSLT($J("",8)_"----      -----------")
 NEW AUMDA,AUMI,AUMLN,DA,DIE,DR
 F AUMI=1:1 S AUMLN=$P($T(ICD9LST+AUMI^AUM71P2),";;",2) Q:AUMLN="END"  D PROCESS
 Q
 ;
PROCESS S AUMLN=$TR(AUMLN,"abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ")
 S Y=$$IXDIC("^ICD9(","ILX","AB",$P(AUMLN,U),80)
 I Y=-1 D RSLT("ERROR:  Lookup/Add of CODE '"_$P(AUMLN,U)_"' FAILED.") Q
 S DA=+Y
 S DR="3///"_$P(AUMLN,U,2)                   ;diagnosis
 S DR=DR_";10///"_$P(AUMLN,U,3)         ;description
 S DR=DR_";100///@"                               ;inactive flag
 S DR=DR_";102///@"                               ;inactive date
 S DR=DR_";2100000///"_DT                   ;date updated
 S DR=DR_";5///"_$P(AUMLN,U,4)           ;MDC
 S DR=DR_";9999999.01///"_$P(AUMLN,U,5)  ;lower age
 S DIE="^ICD9("
 S AUMDA=DA
 D DIE
 I $D(Y) D RSLT("ERROR:  Edit of fields for CODE '"_$P(AUMLN,U,1)_"' FAILED.") Q
 D RSLT($J("",8)_$P(AUMLN,U,1)_$J("",4)_$E($P(AUMLN,U,2),1,30))
 Q
ICD9LST ;;ICD 9 DIAGNOSIS, MODIFIED CODE TITLES: CODE NUMBER(#.01)^DIAGNOSIS(#3)^DESCRIPTION(#10)^MDC(#5)^LOWER AGE(#9999999.01)
 ;;296.20^DEPRESS DISORDER-UNSPEC^MAJOR DEPRESSIVE DISORDER, SINGLE EPISODE, UNSPECIFIED DEGREE
 ;;296.21^DEPRESS DISORDER -MILD^MAJOR DEPRESSIVE DISORDER, SINGLE EPISODE, MILD DEGREE
 ;;296.22^DEPRESSIVE DISORDER-MOD^MAJOR DEPRESSIVE DISORDER, SINGLE EPISODE, MODERATE DEGREE
 ;;296.23^DEPRESS DISORDER-SEV W/O PSYCH^MAJOR DEPRESSIVE DISORDER, SINGLE EPISODE, SEVERE DEGREE, WITHOUT MENTION OF PSYCHOTIC BEHAVIOR
 ;;296.24^DEPR DISORDER-SEV W PSYCH^MAJOR DEPRESSIVE DISORDER, SINGLE EPISODE, SEVERE DEGREE, SPECIFIED AS WITH PSYCHOTIC BEHAVIOR
 ;;296.25^DEPR DISORDER-PART REMISS^MAJOR DEPRESSIVE DISORDER, SINGLE EPISODE, IN PARTIAL OR UNSPECIFIED REMISSION
 ;;296.26^DEPR DISORDER-FULL REMISS^MAJOR DEPRESSIVE DISORDER, SINGLE EPISODE, IN FULL REMISSION
 ;;296.30^RECURR DEPR DISORDER-UNSP^MAJOR DEPRESSIVE DISORDER, RECURRENT EPISODE, UNSPECIFIED DEGREE
 ;;296.31^RECURR DEPR DISORDER-MILD^MAJOR DEPRESSIVE DISORDER, RECURRENT EPISODE, MILD DEGREE
 ;;296.32^RECURR DEPR DISORDER-MOD^MAJOR DEPRESSIVE DISORDER, RECURRENT EPISODE, MODERATE DEGREE
 ;;296.33^RECUR DEPR DISORDER-SEVER^MAJOR DEPRESSIVE DISORDER, RECURRENT EPISODE, SEVERE DEGREE, WITHOUT MENTION OF PSYCHOTIC BEHAVIOR
 ;;296.34^REC DEPR DISORDER-PSYCHOTI^MAJOR DEPRESSIVE DISORDER, RECURRENT EPISODE, SEVERE DEGREE, SPECIFIED AS WITH PSYCHOTIC BEHAVIOR
 ;;296.35^RECUR DEPR DISORD-PART REM^MAJOR DEPRESSIVE DISORDER, RECURRENT EPISODE, IN PARTIAL OR UNSPECIFIED REMISSION
 ;;296.36^RECUR DEPR DISORD-FULL REM^MAJOR DEPRESSIVE DISORDER, RECURRENT EPISODE, IN FULL REMISSION
 ;;952.2^LUMBAR SPINAL CORD INJUR^LUMBAR SPINAL CORD INJURY WITHOUT SPINAL BONE INJURY^21
 ;;485.^BRONCHOPNEUMONIA ORG NOS
 ;;V29.0^OBSV-NB/INFANT SUSPCT INFECT^^^0
 ;;V29.1^OBSV-NB/INFANT SUSPCT NEURO^^^0
 ;;V29.2^OBSV-NB SUSP RESPIRATORY COND^^^0
 ;;V29.3^OBS SUSP GENETIC/METABOLIC^^^0
 ;;V29.8^OBSV-NB/INFANT SUSPCT COND,NEC^^^0
 ;;V29.9^OBSV-NB/INFANT SUSPCT COND,NOS^^^0
 ;;END
