ATXPOS1 ; TUCSON-OHPRD/LAB - IHS-TUCSON/GIS/THL ;  [ 10/12/94  1:37 PM ]
 ;;5.0;TAXONOMY SYSTEM;;OCT 12, 1994
REBUILD ;EP
 I '$D(^ATXAX(0)) W !!,"You do not have the Taxonomy System installed....I can not",!,"update the appropriate entries in the taxonomy file for",!,"the Diabetes Program QA Audit system." H 5 Q
 D KILL
 S ATXFLG=1
 D ADD
 D EXIT
 Q
KILL ;
 K DD,DINUM,DA,DIADD,DLAYGO,DA,DR,DI,A,B,S,D,X,Y,Z,DIC,DIE,D1,DDC,DDH,DIG,DIH,DIU,DIV,DIW,DQ
 K D,D0,D1,DA,DC,DDF,DDT,DE,DG,DH,DI,DIC,DIE,DIF,DIEL,DIFL,DIFLD,DIP,DK,DL,DLAYGO,DM,DN,DP,DQ,DR,DSEC,I,N,NO,X,Y,%,%Y,%X
 Q
EXIT ;
 D KILL
 K ATXAX,ATXX,ATXTAX
 Q
ADD ;
 D DMSUR,HTNSUR,OBESSUR^ATXPOS2,TBSUR^ATXPOS2,PNEUSUR^ATXPOS2,HYSSUR
 Q
DMSUR ;diabetes surveillance
 W !!,"Checking DM Surveillance Taxonomy..."
 S ATXFLG="",X="SURVEILLANCE DIABETES",DIC="^ATXAX(",DIC(0)="MO" D ^DIC K DIC,DA,DINUM,DR,DIADD,DLAYGO,D0,DD,DD
 S ATXTAX=+Y I ATXTAX>0 S DA=ATXTAX,DIK="^ATXAX(" D ^DIK K DIK,DA,DR ;delete current one if it exists
 S:ATXTAX>0 DINUM=ATXTAX S ATXFLG="",X="SURVEILLANCE DIABETES",DIC="^ATXAX(",DIC(0)="L",DIADD=1,DLAYGO=9002226 D ^DIC K DIC,DA,DINUM,DR,DIADD,DLAYGO,D0,DD
 S ATXTAX=+Y
 S $P(^ATXAX(ATXTAX,0),U,2)="DM SURV - USED BY HLTH SUMM",$P(^(0),U,4)="n",$P(^(0),U,5)=DUZ,$P(^(0),U,6)=2600101,$P(^(0),U,8)=1,$P(^(0),U,9)=DT,$P(^(0),U,12)=31,$P(^(0),U,13)=1,$P(^(0),U,14)="BA"
 S $P(^ATXAX(ATXTAX,0),U,15)=80,$P(^(0),U,16)=1
 S ^ATXAX(ATXTAX,11,0)="^^1^1^2940510^^^^",^ATXAX(ATXTAX,11,1,0)="ICD codes:  250.00-250.93"
 S ^ATXAX(ATXTAX,21,0)="^9002226.02102^1^1",^ATXAX(ATXTAX,21,1,0)="250.00^250.93"
 S DA=ATXTAX,DIK="^ATXAX(" D IX1^DIK
 S ATXX=ATXTAX D KILL,ZTM^ATXAX ;update all these codes in icd9 file
 I $O(^ATXPAT(ATXTAX,11,0)) W !,"Pts already entered for this taxonomy.",! Q
 S ATXX=ATXTAX I '$D(^ATXPAT(ATXX,0)) S DIADD="",DIC="^ATXPAT(",DIC(0)="L",X="`"_ATXX,DIC("DR")=".02////"_DT_";.03////"_DUZ D ^DIC K DIADD,DIC,DR S ^ATXPAT(ATXX,11,0)="^9002227.01101PA^0^0"
 D TSKMN^ATXENP ;enter patients into patient taxonomy
 Q
HTNSUR ;surveillance htn
 W !!,"Checking HTN Surveillance Taxonomy..."
 S ATXFLG="",X="SURVEILLANCE HYPERTENSION",DIC="^ATXAX(",DIC(0)="MO" D ^DIC K DIC,DA,DINUM,DR,DIADD,DLAYGO,D0,DD
 S ATXTAX=+Y I ATXTAX>0 S DA=ATXTAX,DIK="^ATXAX(" D ^DIK K DIK,DA,DR ;delete current one if it exists
 S:ATXTAX>0 DINUM=ATXTAX S ATXFLG="",X="SURVEILLANCE HYPERTENSION",DIC="^ATXAX(",DIC(0)="L",DIADD=1,DLAYGO=9002226 D ^DIC K DIC,DA,DINUM,DR,DIADD,DLAYGO,D0,DD
 S ATXTAX=+Y
 S $P(^ATXAX(ATXTAX,0),U,2)="HTN SURV - USED BY HLTH SUMM",$P(^(0),U,4)="n",$P(^(0),U,5)=DUZ,$P(^(0),U,6)=2600101,$P(^(0),U,8)=1,$P(^(0),U,9)=DT,$P(^(0),U,12)=31,$P(^(0),U,13)=1,$P(^(0),U,14)="BA"
 S $P(^ATXAX(ATXTAX,0),U,15)=80,$P(^(0),U,16)=1
 S ^ATXAX(ATXTAX,11,0)="^^1^1^2940510^^^^",^ATXAX(ATXTAX,11,1,0)="ICD codes:  401.0-405.99"
 S ^ATXAX(ATXTAX,21,0)="^9002226.02102^1^1",^ATXAX(ATXTAX,21,1,0)="401.0^405.99"
 S DA=ATXTAX,DIK="^ATXAX(" D IX1^DIK
 S ATXX=ATXTAX
 D KILL,ZTM^ATXAX ;update all these codes in icd9 file
 I $O(^ATXPAT(ATXTAX,11,0)) W !,"Pts already entered for this taxonomy.",! Q
 S ATXX=ATXTAX
 I '$D(^ATXPAT(ATXX,0)) S DIADD="",DIC="^ATXPAT(",DIC(0)="L",X="`"_ATXX,DIC("DR")=".02////"_DT_";.03////"_DUZ D ^DIC K DIADD,DIC,DR S ^ATXPAT(ATXX,11,0)="^9002227.01101PA^0^0"
 D TSKMN^ATXENP ;enter patients into patient taxonomy
 Q
HYSSUR ;surveillance hysterectomy
 W !!,"Checking HYSTERECTOMY Surveillance Taxonomy..."
 S ATXFLG="",X="SURVEILLANCE HYSTERECTOMY",DIC="^ATXAX(",DIC(0)="MO" D ^DIC K DIC,DA,DINUM,DR,DIADD,DLAYGO,D0,DD
 S ATXTAX=+Y I ATXTAX>0 S DA=ATXTAX,DIK="^ATXAX(" D ^DIK K DIK,DA,DR ;delete current one if it exists
 S:ATXTAX>0 DINUM=ATXTAX S ATXFLG="",X="SURVEILLANCE HYSTERECTOMY",DIC="^ATXAX(",DIC(0)="L",DIADD=1,DLAYGO=9002226 D ^DIC K DIC,DA,DINUM,DR,DIADD,DLAYGO,D0,DD
 S ATXTAX=+Y
 S $P(^ATXAX(ATXTAX,0),U,2)="HYS SURV - USED BY HLTH SUMM",$P(^(0),U,4)="n",$P(^(0),U,5)=DUZ,$P(^(0),U,8)=0,$P(^(0),U,9)=DT,$P(^(0),U,12)=255,$P(^(0),U,13)=1,$P(^(0),U,14)="BA"
 S $P(^ATXAX(ATXTAX,0),U,15)=80.1,$P(^(0),U,16)=1
 S ^ATXAX(ATXTAX,21,0)="^9002226.02102^2^2",^ATXAX(ATXTAX,21,1,0)="68.3^68.7",^ATXAX(ATXTAX,21,2,0)="68.9^68.9"
 S DA=ATXTAX,DIK="^ATXAX(" D IX1^DIK
 S ATXX=ATXTAX D KILL,ZTM^ATXAX ;update all these codes in icd9 file
 Q
