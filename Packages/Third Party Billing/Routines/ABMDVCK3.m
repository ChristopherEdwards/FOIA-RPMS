ABMDVCK3 ; IHS/ASDST/DMJ - PCC Visit Edits ;  
 ;;2.6;IHS 3P BILLING SYSTEM;;NOV 12, 2009
 ;
 ; IHS/SD/SDR - v2.5 p8
 ;   Check for uncoded Dx on visit
 ;
 ; IHS/SD/SDR - V2.6 CSV
 ;
ICDCHK(ABMVDFN) ;EP
 D VPOV Q:ABMIFLG=1 ABMIFLG
 D VPROC Q:ABMIFLG=1 ABMIFLG
 D VHOSP Q:ABMIFLG=1 ABMIFLG
 D VISIT Q:ABMIFLG=1 ABMIFLG
 D VLAB Q:ABMIFLG=1 ABMIFLG
 D VIMM Q:ABMIFLG=1 ABMIFLG
 D VSKIN Q:ABMIFLG=1 ABMIFLG
 D VEXAM Q:ABMIFLG=1 ABMIFLG
 D VCPT Q:ABMIFLG=1 ABMIFLG
 D VRAD Q:ABMIFLG=1 ABMIFLG
 D VPATH Q:ABMIFLG=1 ABMIFLG
 D VMICR Q:ABMIFLG=1 ABMIFLG
 D VBB Q:ABMIFLG=1 ABMIFLG
 Q ABMIFLG
VPOV ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVPOV("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVPOV(ABMICD,0)),U),($P($$DX^ABMCVAPI($P($G(^AUPNVPOV(ABMICD,0)),U),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VPROC ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVPRC("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVPRC(ABMICD,0)),U,5),($P($$DX^ABMCVAPI($P($G(^AUPNVPRC(ABMICD,0)),U,5),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VHOSP ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVINP("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVINP(ABMICD,0)),U,12),($P($$DX^ABMCVAPI($P($G(^AUPNVINP(ABMICD,0)),U,12),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VISIT ;
 S ABMIFLG=0
 I $P($G(^AUPNVSIT(ABMVDFN,11)),U,7),($P($$DX^ABMCVAPI($P($G(^AUPNVSIT(ABMVDFN,11)),U,7),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VLAB ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVLAB("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVLAB(ABMICD,12)),U,13),($P($$DX^ABMCVAPI($P($G(^AUPNVLAB(ABMICD,12)),U,13),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 .I $P($G(^AUPNVLAB(ABMICD,11)),U,12),($P($$DX^ABMCVAPI($P($G(^AUPNVLAB(ABMICD,11)),U,12),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VIMM ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVIMM("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVIMM(ABMICD,12)),U,13),($P($$DX^ABMCVAPI($P($G(^AUPNVIMM(ABMICD,12)),U,13),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VSKIN ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVSK("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVSK(ABMICD,12)),U,13),($P($$DX^ABMCVAPI($P($G(^AUPNVSK(ABMICD,12)),U,13),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VEXAM ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVXAM("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVXAM(ABMICD,12)),U,13),($P($$DX^ABMCVAPI($P($G(^AUPNVXAM(ABMICD,12)),U,13),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VCPT ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVCPT("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVCPT(ABMICD,0)),U,5),($P($$DX^ABMCVAPI($P($G(^AUPNVCPT(ABMICD,0)),U,5),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VRAD ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVRAD("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVRAD(ABMICD,0)),U,9),($P($$DX^ABMCVAPI($P($G(^AUPNVRAD(ABMICD,0)),U,9),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 .I $P($G(^AUPNVRAD(ABMICD,12)),U,13),($P($$DX^ABMCVAPI($P($G(^AUPNVRAD(ABMICD,12)),U,13),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VPATH ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVPTH("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVPTH(ABMICD,11)),U,12),($P($$DX^ABMCVAPI($P($G(^AUPNVPTH(ABMICD,11)),U,12),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 .I $P($G(^AUPNVPTH(ABMICD,12)),U,13),($P($$DX^ABMCVAPI($P($G(^AUPNVPTH(ABMICD,12)),U,13),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VMICR ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVMIC("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVMIC(ABMICD,11)),U,12),($P($$DX^ABMCVAPI($P($G(^AUPNVMIC(ABMICD,11)),U,12),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 .I $P($G(^AUPNVMIC(ABMICD,12)),U,13),($P($$DX^ABMCVAPI($P($G(^AUPNVMIC(ABMICD,12)),U,13),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
VBB ;
 S ABMICD=0
 S ABMIFLG=0
 F  S ABMICD=$O(^AUPNVBB("AD",ABMVDFN,ABMICD)) Q:'ABMICD  D  Q:ABMIFLG=1
 .I $P($G(^AUPNVBB(ABMICD,11)),U,12),($P($$DX^ABMCVAPI($P($G(^AUPNVBB(ABMICD,11)),U,12),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 .I $P($G(^AUPNVBB(ABMICD,12)),U,13),($P($$DX^ABMCVAPI($P($G(^AUPNVBB(ABMICD,12)),U,13),ABMP("VDT")),U,2)=.9999) S ABMIFLG=1  ;CSV-c
 Q
