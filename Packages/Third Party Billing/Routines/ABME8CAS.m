ABME8CAS ; IHS/ASDST/DMJ - 837 CAS Segment 
 ;;2.6;IHS 3P BILLING SYSTEM;;NOV 12, 2009
 ;Transaction Set Header
 ;
 ; IHS/SD/SDR - v2.5 p13 - IM25471
 ;   Added code for CO when SAR=A2
 ;
EP ;EP - START HERE
 ; for consistency with other routines
 K ABMREC("CAS"),ABMR("CAS")
 S ABME("RTYPE")="CAS"
 S ABMCNT=1
 D LOOP
 K ABME,ABM
 Q
LOOP ;LOOP HERE
 F I=10:10:200 D
 .D @I
 .I $D(^ABMEXLM("AA",+$G(ABMP("INS")),+$G(ABMP("EXP")),ABME("RTYPE"),I)) D @(^(I))
 .I $G(ABMREC("CAS"))'="" S ABMREC("CAS")=ABMREC("CAS")_"*"
 .S ABMREC("CAS")=$G(ABMREC("CAS"))_ABMR("CAS",I)
 Q
10 ;segment
 S ABMR("CAS",10)="CAS"
 Q
20 ;CAS01 - Claim Adjustment Group Code
 S ABMR("CAS",20)=""
 S ABMR("CAS",20)=ABML
 Q
30 ;CAS02 - Claim Adjustment Reason Code
 S ABMR("CAS",30)=""
 S ABMR("CAS",30)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U)
 Q
40 ;CAS03 - Monetary Amount
 S ABMR("CAS",40)=""
 S ABMR("CAS",40)=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 I ABML="PR" S ABMF2AMT=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 Q
50 ;CAS04 - Quantity
 S ABMR("CAS",50)=""
 S ABMR("CAS",50)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,3)
 S ABMCNT=ABMCNT+1
 Q
60 ;CAS05 - Claim Adjustment Reason Code
 S ABMR("CAS",60)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",60)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U)
 Q
70 ;CAS06 - Monetary Amount
 S ABMR("CAS",70)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",70)=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 I ABML="PR" S ABMF2AMT=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 Q
80 ;CAS07 - Quantity
 S ABMR("CAS",80)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",80)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,3)
 S ABMCNT=ABMCNT+1
 Q
90 ;CAS08 - Claim Adjustment Reason Code
 S ABMR("CAS",90)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",90)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U)
 Q
100 ;CAS09 - Monetary Amount
 S ABMR("CAS",100)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",100)=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 I ABML="PR" S ABMF2AMT=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 Q
110 ;CAS10 - Quantity
 S ABMR("CAS",110)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",110)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,3)
 S ABMCNT=ABMCNT+1
 Q
120 ;CAS11 - Claim Adjustment Reason Code
 S ABMR("CAS",120)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",120)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U)
 Q
130 ;CAS12 - Monetary Amount
 S ABMR("CAS",130)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",130)=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 I ABML="PR" S ABMF2AMT=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 Q
140 ;CAS13 - Quantity
 S ABMR("CAS",140)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",140)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,3)
 S ABMCNT=ABMCNT+1
 Q
150 ;CAS14 - Claim Adjustment Reason Code
 S ABMR("CAS",150)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",150)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U)
 Q
160 ;CAS15 - Monetary Amount
 S ABMR("CAS",160)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",160)=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 I ABML="PR" S ABMF2AMT=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 Q
170 ;CAS16 - Quantity
 S ABMR("CAS",170)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",170)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,3)
 S ABMCNT=ABMCNT+1
 Q
180 ;CAS17 - Claim Adjustment Reason Code
 S ABMR("CAS",180)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",180)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U)
 Q
190 ;CAS18 - Monetary Amount
 S ABMR("CAS",190)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",190)=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 I ABML="PR" S ABMF2AMT=$FN($P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,2),"-")
 Q
200 ;CAS19 - Quantity
 S ABMR("CAS",200)=""
 Q:'$D(ABMP(+ABMLINE,ABML,ABMCNT))
 S ABMR("CAS",200)=$P($G(ABMP(+ABMLINE,ABML,ABMCNT)),U,3)
 S ABMCNT=ABMCNT+1
 Q
