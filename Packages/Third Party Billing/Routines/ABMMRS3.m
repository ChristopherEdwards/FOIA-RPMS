ABMMRS3 ; IHS/ASDST/DMJ - NEW PROGRAM ; 
 ;;2.4;IHS 3P BILLING SYSTEM;;APR 14, 2000
 ;IHS/DSD/MRS
 ;
INIT S (CLAIM,BDFN,DFN,SITE)=""
 K ^ABMMRS1,^ABMMRS2,^ABMMRS3,^ABMMRS4,^ABMMRS5
 F  S CLAIM=$O(^ABMMRS(CLAIM)) Q:CLAIM=""  D
 .F  S BDFN=$O(^ABMMRS(CLAIM,BDFN)) Q:BDFN=""  D SEP
 S ^ABMMRS1=N1
 S N=0,X="" F  S X=$O(^ABMMRS2(X)) Q:X=""  S N=N+1
 S ^ABMMRS2=N
 S N=0,X="" F  S X=$O(^ABMMRS3(X)) Q:X=""  S N=N+1
 S ^ABMMRS3=N
 S N=0,X="" F  S X=$O(^ABMMRS4(X)) Q:X=""  S N=N+1
 S ^ABMMRS4=N
 S N=0,X="" F  S X=$O(^ABMMRS5(X)) Q:X=""  S N=N+1
 Q
SEP ;Separate file
 F X="BILL","CLAIM" D
 .F  S DFN=$O(^ABMMRS(CLAIM,BDFN,X,DFN)) Q:DFN=""  D
 ..F  S SITE=$O(^ABMMRS(CLAIM,BDFN,X,DFN,SITE)) Q:SITE=""  D
 ...I ^ABMMRS(CLAIM)=1 S ^ABMMRS1(CLAIM,BDFN,SITE)=DFN Q
 ...I ^ABMMRS(CLAIM)=2 D  Q
 ....S ^ABMMRS2(CLAIM,BDFN,X,DFN,SITE)=^ABMMRS(CLAIM,BDFN,X,DFN,SITE) Q
 ...I ^ABMMRS(CLAIM)=3 D  Q
 ....S ^ABMMRS3(CLAIM,BDFN,X,DFN,SITE)=^ABMMRS(CLAIM,BDFN,X,DFN,SITE) Q
 ...I ^ABMMRS(CLAIM)=4 D  Q
 ....S ^ABMMRS4(CLAIM,BDFN,X,DFN,SITE)=^ABMMRS(CLAIM,BDFN,X,DFN,SITE) Q
 ...S ^ABMMRS5(CLAIM,BDFN,X,DFN,SITE)=^ABMMRS(CLAIM,BDFN,X,DFN,SITE)
 Q
