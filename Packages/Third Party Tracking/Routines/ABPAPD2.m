ABPAPD2 ;PVT-INS PYMT ENTRY CONTINUED; [ 08/07/91  4:54 PM ]
 ;;1.4;AO PVT-INS TRACKING;*0*;IHS-OKC/KJR;JULY 25, 1991
FRDT S X="--- SERVICE PERIOD(S) ---" W !!?(40-($L(X)/2)),X
 K %DT S %DT("A")="For DATES OF SERVICE from: "
 S %DT="AEPX",%DT(0)=DT*-1 W ! D ^%DT I +Y<0 D  G ^ABPAPD1
 .L ^ABPVAO(ABPATDFN)
 S ABPAFRDT=+Y,%DT("B")=X
TODT S %DT("A")="                       To: ",%DT="AEPX"
 S %DT(0)=DT*-1 D ^%DT G:+Y<0 FRDT S ABPATODT=+Y
 I ABPAFRDT>ABPATODT D  G FRDT
 .W *7,!!?10,"<<< ERROR - THE END IS BEFORE THE BEGINNING >>>"
A0 D ^ABPAPD2C G:+ABPACCNT'>0 ^ABPAPD1 K DIR
 S DIR("A")="IS THIS CORRECT (1-Yes, 2-No, 3-Cancel): ",DIR("B")=3
 S DIR(0)="SOAB^1:Yes;2:No;3:Cancel;" D ^DIR G ^ABPAPD2B:+Y=1
YN I +Y=3 L ^ABPVAO(ABPATDFN) G ^ABPAPD1
 ;
SCREEN K DIC,DIE,DA,DR,X,Y,DIR S DIR(0)="NO^1:"_ABPACCNT
 S DIR("A")="Select CLAIM NUMBER TO SCREEN OUT " D ^DIR G:+Y<1 A0
 I $D(ABPA("C",+Y))=1 D  G SCREEN
 .S ABPACSCR(ABPA("C",+Y))="" W " ...done!"
 W " ...not screened out!" G SCREEN
 ;
KILL K ABPACAMT,D0,DIC,DIE,DA,DR,ABPA("QF"),ABPADOS,ABPA("I")
 K ABPA("II"),ABPAPTR,ABPADATA,ABPATYPE,ABPASTAT Q
