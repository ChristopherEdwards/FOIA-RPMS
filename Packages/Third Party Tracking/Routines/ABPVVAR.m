ABPVVAR ;PVT INS VARIABLE INITIALIZER; [ 06/03/91  1:38 PM ]
 ;;2.0;FACILITY PVT-INS TRACKING;*0*;IHS-OKC/KJR;AUGUST 7, 1991
VARS ;
 D DT^DICRW S U="^",ABPVHOME="",ABPVRON="",ABPVROFF="",ABPVEOL=""
 S ABPVEOP="",ABPVBON="",ABPVBOFF=""
 S IOP=$I D ^%ZIS K IOP
 D CURRENT^%ZIS
 I $D(IOST(0))=1&($D(^%ZIS(2,IOST(0),5))=1) D
 .S ABPVHOME=$P(^%ZIS(2,IOST(0),5),"^",3)_",#"
 .S ABPVRON=$P(^%ZIS(2,IOST(0),5),"^",4)
 .S ABPVROFF=$P(^%ZIS(2,IOST(0),5),"^",5)
 .S ABPVEOL=$P(^%ZIS(2,IOST(0),5),"^",6)
 .S ABPVEOP=$P(^%ZIS(2,IOST(0),5),"^",7) I ABPVEOL["[K" D
 ..S ABPVEOP="F ABPVI=1:1:IOSL-(DY+1) W *27,""[K"",! "
 ..S ABPVEOP=ABPVEOP_"I ABPVI=(IOSL-(DY+1)) X XY"
 .S ABPVBON=$P(^%ZIS(2,IOST(0),5),"^",8)
 .S ABPVBOFF=$P(^%ZIS(2,IOST(0),5),"^",9)
 S:$D(DUZ(2))'=1 DUZ(2)=$P(^AUTTSITE(1,0),"^")
 I IOST["VT100" I XY'="W *27,*91,DY+1,*59,DX+1,*72"
 .S XY="W *27,*81,DY+1,*59,DX+1,*72"
TITLE ;
 S ABPVTLE="FACILITY PVT-INS TRACKING SYSTEM "
 S ABPVVER=$O(^DIC(9.4,"C","ABPV",""))
 I ABPVVER]"",$D(^DIC(9.4,ABPVVER,"VERSION")) D
 .S ABPVVER="V."_^DIC(9.4,ABPVVER,"VERSION")
 .S ABPVTLE=ABPVTLE_ABPVVER
KERNEL ;
 S ABPVKVER=$O(^DIC(9.4,"B","KERNEL",""))
 I ABPVKVER]"" I $D(^DIC(9.4,ABPVKVER,"VERSION"))=1 D
 .S ABPVKVER=^("VERSION")
USER ;
 S ABPVUSER="??" I $D(^DIC(3,DUZ,.1))=1 S ABPVUSER=$P(^(.1),"^",4)
 S ABPVDEV=$I
 Q
