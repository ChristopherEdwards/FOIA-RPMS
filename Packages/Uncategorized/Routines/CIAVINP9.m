CIAVINP9 ;MSC/IND/PLS - EHR v1.1p9 Inits;21-Nov-2011 10:09;PLS
 ;;1.1;VUECENTRIC FRAMEWORK;;23-Oct-2006
 ;;Copyright 2000-2010, Medsphere Systems Corporation
 ;=================================================================
EC ;EP - Environment check
 Q
PRE ;EP - Preinit
 Q
POST ;EP - Postinit
 N VER,FDA,PID,IEN,X,TYPE
 D BMES^XPDUTL("Updating version numbers...")
 F VER=0:1 S X=$P($T(VER+VER),";;",2) Q:'$L(X)  D
 .S PID=$$PRGID^CIAVMCFG($P(X,";"))
 .S:PID FDA(19930.2,PID_",",2)=$P(X,";",2),FDA(19930.2,PID_",",7)=$P(X,";",3)
 D:$D(FDA) FILE^DIE(,"FDA")
 ;W !!!
 I $L($$GETLOGIN^CIAVUTIL),$$ASK^CIAU("Do you want to enable EHR logins","Y") D
 .D SDABORT^CIAVUTIL(,1),BMES^XPDUTL("Application logins have been enabled.")
 Q
 ;
UPDCHM ;EP-
 Q
 N CHM
 F CHM=0:1 S X=$P($T(CHM+CHM),";;",2) Q:'$L(X)  D
 .S PID=$$PRGID^CIAVMCFG($P(X,";"))
 .D AECHM(PID,$P(X))
 D:$D(FDA) FILE^DIE(,"FDA")
 W !!!
 Q
 ;
AECHM(PID,OBJ) ;EP-
 N LN
 S LN=0
 Q
 ; Attach Event Protocols to Event Types
EVTPRTL(TYPE) ;
 N EVTNM,PRT,EVT,FDA
 S EVTNM="CIAV "_TYPE_" EVENT"
 S
 EVT=$$EVENTIEN^CIANBEVT(TYPE)
 Q:'EVT
 S PRT=$$FIND1^DIC(101,,,EVTNM)
 Q:'PRT
 S FDA(19941.21,EVT_",",7)=PRT
 D FILE^DIE(,"FDA")
 Q
 ; Rename .01 field of BEH Measurement file
BEHMSR(X,Y) ;
 N IEN,FDA
 S IEN=$O(^BEHOVM(90460.01,"B",X,0))
 Q:'IEN
 S FDA(90460.01,IEN_",",.01)=Y
 D FILE^DIE(,"FDA")
 Q
VER ;;BEHNOTIFICATIONS.NOTIFICATIONS;5.1.6.15;D9485C7BA11CF2FD5F254F4716BEA85C
 ;;VCPRINT.VCPRINTX;1.1.4.27;64DCBBE30575C132727B735E1FB444AD
 ;;
CHM ;;BEHNOTIFICATIONS.NOTIFICATIONS;BEHNotifications.chm;2011.11.16.212337;33CF3EA4C28D2CCFD965B1087860EB23
 ;;BEHALLERGIES.ALLERGIES;BEHAllergies.chm;2011.11.16.212212;82A261F35386CE5AC60D63E9C5C24D01
 ;;BEHMEDS.MEDMANAGEMENT;BEHMeds.chm;2011.11.16.212237;72064860D00A7B930D1B838CD9DF9375
 ;;VCQUICKNOTE.QUICKNOTE;vcQuickNote.chm;2011.11.16.212235;49186C1FF2461F4F134A19DB7AF9A46C
 ;;INDIANHEALTHSERVICE.BEH.IBH.SUICIDE.CONTROLS.CTLSUICIDE_FORM;Suicide_Form.chm;2011.11.16.212225;F8AAB04D8622E3B3B87871CB5517394A
 ;;BEHCRISES.CRISES;BEHCrises.chm;2011.11.16.212239;614E9A297213703EC59829B445601A91
 ;;BEHCCDC32.BEHC32BUTTON;C32_Viewer_Launch_Button.chm;2011.11.16.212340;E4BD868E0890A1142D19F0BB27617229
 ;;BEHCCDC32.BEHKMRBUTTON;C32_Viewer_Launch_Button.chm;2011.11.16.212340;E4BD868E0890A1142D19F0BB27617229
 ;;BEHCHARTREVIEW.CHARTREVIEW;BEHChartReview.chm;2011.11.16.212241;631262CE72E82A17E154A858864DDF5E
 ;;
