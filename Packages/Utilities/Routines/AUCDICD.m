AUCDICD ; DELETE BAD FILES [ 06/13/87  9:44 AM ]
 ;
 S AUCDDEL=0,AUCDFILE="" F AUCDL=0:0 S AUCDFILE=$O(^UTILITY("AUDSET",$J,AUCDFILE)) Q:AUCDFILE=""  S AUCDGOOD=1 D:$D(^(AUCDFILE,"ERR"))\10 ERRORS K:AUCDGOOD ^UTILITY("AUDSET",$J,AUCDFILE)
 I AUCDDEL W !!,"Executing ^%AUKD to delete specified files!" D EN2^%AUKD
 K AUCDDEL,AUCDFILE,AUCDGOOD,AUCDX,AUCDNDIC
 Q
 ;
ERRORS ; RESOLVE ERRORS SET BY ^AUCDIC2 OR ^AUCDIC3
 W !
 S AUCDX="" F AUCDL=0:0 S AUCDX=$O(^UTILITY("AUDSET",$J,AUCDFILE,"ERR",AUCDX)) Q:AUCDX=""  W !,^(AUCDX)
ACTR R !!,"     Delete file? (Y/N) ",AUCDX I AUCDX'="Y"&(AUCDX'="N") W *7,"  ??" G ACTR
 S:AUCDX="Y" AUCDDEL=1,AUCDGOOD=0,^UTILITY("AUDSET",$J,AUCDFILE)="A^A"
 K ^UTILITY("AUDSET",$J,AUCDFILE,"ERR")
 Q
