CIAVINP6 ;MSC/IND/DKM/PLS - EHR v1.1p6 Inits;24-Jun-2010 11:36;PLS
 ;;1.1;VUECENTRIC FRAMEWORK;;23-Oct-2006
 ;;Copyright 2000-2008, Medsphere Systems Corporation
 ;=================================================================
EC ;EP - Environment check
 Q
PRE ;EP - Preinit
 Q
POST ;EP - Postinit
 N VER,FDA,PID,IEN,X,TYPE
 D REGMENU^BEHUTIL("BEHORXED MAIN",,"MEC","BEHORX MAIN")
 D BMES^XPDUTL("Fixing BEH Measurement file O2 Sat entry...")
 ;D BEHMSR("02 SATURATION","O2 SATURATION")
 D BMES^XPDUTL("Attaching event protocols...")
 F TYPE="LOGIN","LOGOUT","LOCK","SUBSCRIBE","UNSUBSCRIBE" D EVTPRTL(TYPE)
 D BMES^XPDUTL("Updating version numbers...")
 F VER=0:1 S X=$P($T(VER+VER),";;",2) Q:'$L(X)  D
 .S PID=$$PRGID^CIAVMCFG($P(X,";"))
 .S:PID FDA(19930.2,PID_",",2)=$P(X,";",2),FDA(19930.2,PID_",",7)=$P(X,";",3)
 D:$D(FDA) FILE^DIE(,"FDA")
 D REGNMSP^CIAURPC("BGU","CIAV VUECENTRIC")
 W !!!
 I $L($$GETLOGIN^CIAVUTIL),$$ASK^CIAU("Do you want to enable EHR logins","Y") D
 .D SDABORT^CIAVUTIL(,1),BMES^XPDUTL("Application logins have been enabled.")
 Q
 ; Attach Event Protocols to Event Types
EVTPRTL(TYPE) ;
 N EVTNM,PRT,EVT,FDA
 S EVTNM="CIAV "_TYPE_" EVENT"
 S EVT=$$EVENTIEN^CIANBEVT(TYPE)
 Q:'EVT
 S PRT=$$FIND1^DIC(101,,,EVTNM)
 Q:'PRT
 S FDA(19941.21,EVT_",",7)=PRT
 D FILE^DIE(,"FDA")
 Q
 ; Rename .01 field of BEH Measurement file
BEHMSR(X,Y) ;
 N IEN,FDA
 S IEN=$O(^BEHOVM(90460.01,"B",X,0))
 Q:'IEN
 S FDA(90460.01,IEN_",",.01)=Y
 D FILE^DIE(,"FDA")
 Q
VER ;;BEHALERTS.ALERTS;4.2.3.1;D3E44EDFE32ED5F8FAEC0314AA08033A
 ;;BEHALLERGIES.ALLERGIES;4.2.4.2;9AE0D06ABA5FED87CEFBF48416CFDD6C
 ;;BEHARTENTRY.ARTENTRY;2.0.2.45;34B4D79C6332DD338D4796B2EFEB679B
 ;;BEHCONSULTORDERS.CONSULTORDERS;4.2.3.2;4C6D108A79097612F02FF03AC9144EC2
 ;;BEHCONSULTS.CONSULTS;20.1.3.3;DF1F1BBEB1B8614C889FBF3CCAB60D89
 ;;BEHCONTEXTADAPTER.CONTEXTADAPTER;4.2.3.2;280EDE7EA860F6A03F73ED8521695551
 ;;BEHCPRSCOMWRAPPER.CPRSCOMWRAPPER;1.0.0.26;E771508691AB530967BE4666437C4887
 ;;BEHCRISES.CRISES;4.2.3.1;D6BF4BA76917AFBC2E8128452CCE7EEB
 ;;BEHCWAD.CWAD;4.2.4.1;FAF0B9ADBFE7FA0480B736A32E617738
 ;;BEHDCSUMM.DCSUMM;20.1.3.3;1F1997CA622C7080FD89FE7B2C8573D8
 ;;BEHDICTATE.DICTATE;1.2.1.1;08F8882A1F47EBFC240C914681BF869A
 ;;BEHENCOUNTERINFO.ENCOUNTERINFO;4.2.1.2;45EADA7EBF5F5D20384BC98542149DE5
 ;;BEHESIGREVIEW.REVIEW;20.1.1.3;A183738F99E25281625B3CB13009531B
 ;;BEHESIGSERVICE.ESIGSERVICE;20.1.3.16;E5A7E549B47ED3ED9F293B926D3AA720
 ;;BEHHSREPORT.HSREPORT;1.0.1.1;DE39AFC8D3850B9355915BD40BDBD7CF
 ;;BEHLAB.LABVIEW;20.1.3.2;23247648D4EAFDC136C9C183ACDEC3C5
 ;;BEHLABORDERS.LABORDERS;4.2.3.2;C56329CF109A952DF6C7D6E18E6E2702
 ;;BEHMEDLIST.MEDLIST;4.2.2.1;A5B2B4A8534D44B55E1C9C8564B17F69
 ;;BEHMEDS.MEDMANAGEMENT;20.2.2.2;A815A841037D7AFC93D82FF8F5E431C0
 ;;BEHNOTES.PROGRESSNOTES;20.1.3.13;B72B100393C403FFDCA5A10FF93A3AA1
 ;;BEHNOTIFICATIONS.NOTIFICATIONS;5.1.6.8;016064FFC474B429C2336A80C6544B26
 ;;BEHOPTIONS.OPTIONS;1.1.2.3;48BC051A92CE9CD561BD5526C6962582
 ;;BEHORDERS.ORDERENTRY;20.1.2.2;B54CF0ECED9A704267D1F42335B2878B
 ;;BEHPATIENTID.PATIENTID;4.2.1.1;8D1D076C677D0F9C6B498F5B9DD3CB56
 ;;BEHPHARMED.PHARMED;1.0.2.1;C0C3434DF39330B570A5240D4B2C23DF
 ;;BEHPRIMARYCARE.PRIMARYCARE;4.2.1.4;9ED8C001C511ABC8525129A9519B57E0
 ;;BEHPROBLEMLIST.PROBLEMLIST;4.2.3.2;A93D3C8365A2EBBD37B650E23AECA543
 ;;BEHPTDETAIL.PTDETAIL;4.2.3.1;8455E2747C95DCD5C02C14728A4623D0
 ;;BEHQOWIZARD.QOWIZARD;1.1.4.20;016D756D104AA80A1961BDD5D424C202
 ;;BEHREMINDERS.REMINDERS;4.2.3.1;A4E8B2413D3A4C01DA8956C62F0E5118
 ;;BEHREMINDERSVIEW.REMINDERSVIEW;4.2.3.1;8DD50AA61700235BB6A237E133EF5D6C
 ;;BEHREMOTEDATA.REMOTEDATA;4.2.2.1;F0F71B226561BC89B9FBD4950AF328E4
 ;;BEHREMOTEVIEWS.REMOTESITES;4.2.1.2;07C7072C8D4B41DCBECF370062853269
 ;;BEHREPORTS.REPORTS;20.1.3.1;5475F0052B5619A534333F8E66C709CC
 ;;BEHSPELLCHECK.SPELLCHECK;1.0.2.2;36824FA7572620EC6E5C9015ED7F8FDF
 ;;BEHSURGERY.SURGERY;20.1.3.1;E216D4750A8BB9D4E4F81C37DFBFE2D7
 ;;BEHVISITS.VISITS;4.2.3.1;5AAAC1C3210782CE9EB0204EDB433B18
 ;;BEHVITALENTRY.VITALENTRY;2.0.4.4;523F68FAFF44D95F9CA562421CC63488
 ;;BEHVITALENTRY.VITALENTRY2;2.0.4.4;523F68FAFF44D95F9CA562421CC63488
 ;;BEHVITALS.VITALDISPLAY;5.0.4.1;8E328257FA469077666E3F504514B7D0
 ;;CSS_ENCOUNTER.ENCOUNTER;4.3.5.10;89A9DD33734B521C243D0452E79E9D45
 ;;CSS_PATIENT.PATIENT;4.3.5.3;9F77DE46686E32BDC3A4BA9DD15ACF1F
 ;;CSS_SITE.SITE;4.3.0.9;F803BFAF598674181BFB1AAC968B0796
 ;;INDIANHEALTHSERVICE.BEH.IBH.SUICIDE.CONTROLS.CTLSUICIDE_FORM;1.1.3565.20437;DA938E981440FD056656DDC61DF8F573
 ;;INDIANHEALTHSERVICE.BEH.POCLAB.BEHLABPOC;1.0.3553.18776;3018AA5905C3F32F434502D4FB2A9AF8
 ;;VCBROADCAST.BROADCAST;4.2.1.1;638913583B1EC3D416EC663D0F985BA1
 ;;VCCHATSERVICE.CHATSERVICE;1.0.2.1;95963557529070AB5F288921B05A96FE
 ;;VCCHRONICPAINMU.VCCHRONICPAINMUX;1.1.2.1;3C05A36539396BDB2FE9925D9A4D3656
 ;;VCCHRONICPAINPM.VCCHRONICPAINPMX;2.1.2.3;2E39462612FD5FD8352CD4967903B206
 ;;VCCHRONICPAINRP.VCCHRONICPAINRPX;1.1.2.2;24C6E47837C06EE12BF345329ACDB273
 ;;VCDATE.VCDATES;1.0.3.1;CC70FC8A38110EB5FBA9034FDBBE0483
 ;;VCIEXPLORER.IEXPLORER;4.3.3.1;24FC45007CCE45D02DC362180956BE77
 ;;VCIMAGE.IMAGEX;4.1.1.1;DC8E438A36E2107496E1E2D4696032E6
 ;;VCLAUNCHER.LAUNCHER;4.1.4.1;E40DB4B71EB2A277D341024E0F23AEFD
 ;;VCMONITOR.MONITOR;1.1.2.1;35239ACC3717A4AD6AFDF10B91716B76
 ;;VCPATPHOTO.PATPHOTO;4.1.3.2;BE689F87C78389B8C0E50D97C5167040
 ;;VCPRINT.VCPRINTX;1.1.4.4;5D8DD9AE09EE70C32A8E466C080A631A
 ;;VCQUICKNOTE.QUICKNOTE;1.1.2.1;0E0AD20C61B0AF51B9B84A87503CA805
 ;;VCSAFEMED.WEBSERVICE;1.0.2804.16720;9485B5857E44410442D1B7C023495731
 ;;VCTELNET.TELNETX;1.1.2.1;27A9927AF2F065E2652CCE5C8560F79D
 ;;VCWHEALTHMF.VCWOMENSHEALTHMFX;1.1.3.1;4DD968EDC90D8DEA7EDCE57C582B8821
 ;;VCWHEALTHMR.VCWOMENSHEALTHMRX;1.1.3.1;6CCA6D4C2D1BAA97DC53DFDB1E4FA910
 ;;VCWHEALTHPM.VCWOMENSHEALTHPMX;1.1.3.1;12F31738D6F7C6FC833EB78122FD58A3
 ;;FILE:COMDLG32.OCX;6.0.84.18;D76F0EAB36F83A31D411AEAF70DA7396
 ;;FILE:DARTSOCK.DLL;2.8.2;AFC83571E994861EEBBAB066600BE0BB
 ;;FILE:DARTTELNET.DLL;1.8.2;F22E29173BBA44EDF82E1A624E252204
 ;;FILE:DARTVT.DLL;1.8.3;AA44FE7FE3FB812B5F8DBFCA98EDAD3F
 ;;FILE:MSCOMCT2.OCX;6.0.88.4;C1B4AF41A0370E4081D59AC99BCC929D
 ;;FILE:PVNUM.OCX;8.0.4.2;8702402CA671706BDAE66CA9A54D6DA2
 ;;FILE:TABCTL32.OCX;6.0.90.43;908938D3BA2D870EE9FC6238A4C6AF95
 ;;FILE:VSFLEX8L.OCX;8.0.20061.231;A63B78ED2FAE227F31A68D292404ACFB
 ;;
