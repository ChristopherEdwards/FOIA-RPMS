CIAVINP8 ;MSC/IND/PLS - EHR v1.1p8 Inits;05-May-2011 09:36;DKM
 ;;1.1;VUECENTRIC FRAMEWORK;;23-Oct-2006
 ;;Copyright 2000-2010, Medsphere Systems Corporation
 ;=================================================================
EC ;EP - Environment check
 Q
PRE ;EP - Preinit
 N IEN
 S IEN=$$PRGID^CIAVMCFG("BEHCHARTREVIEW.CHARTREVIEW")
 I IEN D
 .K ^CIAVOBJ(19930.2,IEN,6)
 Q
POST ;EP - Postinit
 N VER,FDA,PID,IEN,X,TYPE
 ;D REGMENU^BEHUTIL("BEHORXED MAIN",,"MEC","BEHORX MAIN")
 ;D BMES^XPDUTL("Attaching event protocols...")
 D BMES^XPDUTL("Updating version numbers...")
 F VER=0:1 S X=$P($T(VER+VER),";;",2) Q:'$L(X)  D
 .S PID=$$PRGID^CIAVMCFG($P(X,";"))
 .S:PID FDA(19930.2,PID_",",2)=$P(X,";",2),FDA(19930.2,PID_",",7)=$P(X,";",3)
 D:$D(FDA) FILE^DIE(,"FDA")
 W !!!
 I $L($$GETLOGIN^CIAVUTIL),$$ASK^CIAU("Do you want to enable EHR logins","Y") D
 .D SDABORT^CIAVUTIL(,1),BMES^XPDUTL("Application logins have been enabled.")
 Q
 ; Attach Event Protocols to Event Types
EVTPRTL(TYPE) ;
 N EVTNM,PRT,EVT,FDA
 S EVTNM="CIAV "_TYPE_" EVENT"
 S EVT=$$EVENTIEN^CIANBEVT(TYPE)
 Q:'EVT
 S PRT=$$FIND1^DIC(101,,,EVTNM)
 Q:'PRT
 S FDA(19941.21,EVT_",",7)=PRT
 D FILE^DIE(,"FDA")
 Q
 ; Rename .01 field of BEH Measurement file
BEHMSR(X,Y) ;
 N IEN,FDA
 S IEN=$O(^BEHOVM(90460.01,"B",X,0))
 Q:'IEN
 S FDA(90460.01,IEN_",",.01)=Y
 D FILE^DIE(,"FDA")
 Q
VER ;;BEHCWAD.CWAD;4.2.5.3;C94289CE0CEB17818AF58118E752EDE7
 ;;BEHMEDLIST.MEDLIST;4.2.3.22;C57884812056E971A1FD506586A92113
 ;;BEHPROBLEMLIST.PROBLEMLIST;4.2.4.16;5EE1EFB387763C5DD7BFF56D410F795E
 ;;VCWHEALTHMF.VCWOMENSHEALTHMFX;1.1.3.2;718DBE236C056A6F3B6150855FA88D4C
 ;;VCWHEALTHMR.VCWOMENSHEALTHMRX;1.1.3.2;3192153C1E9BBFF6995347A49B7E6318
 ;;VCWHEALTHPM.VCWOMENSHEALTHPMX;1.1.3.2;D52B3B7E4B23F60BCDDB087E9F2D4635
 ;;VCTELNET.TELNETX;1.1.2.6;BB00B0384BCF2F372A2511FF43BD03C0
 ;;VCQUICKNOTE.QUICKNOTE;1.1.2.6;4EE52BAD0CCC19D3048B0FAFE10333EE
 ;;BEHREMINDERSVIEW.REMINDERSVIEW;4.2.3.2;C5E43B1DB02F7114FD77852C8857DA2F
 ;;INDIANHEALTHSERVICE.BEH.POCLAB.BEHLABPOC;1.0.4028.20775;C67AE4A57BBD4AA06E31F3ABFD8DF8D5
 ;;BEHDOSINGCALC.DOSINGCALC;1.3.0.3;ACEE1D0F09BBE344E453E6E49C72E436
 ;;BEHOPTIONS.OPTIONS;1.1.2.4;D1DAD5B8CE1A29DBEC69BE2918CFEBEE
 ;;
 ;;
